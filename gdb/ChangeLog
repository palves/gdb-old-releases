Sun Aug 29 10:36:47 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (VERSION):  Change to 4.10.pl1

Fri Aug 13 07:17:03 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (VERSION):  GDB 4.10 release.
	* NEWS:  Touchups for 4.10 release.
	* README:  Touchups for 4.10 release.

Wed Aug 11 10:13:48 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (VERSION): bumped version to 4.9.89.

Tue Aug 10 14:50:30 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (wrap_here): Allow indent to be NULL.
	(fputs_filtered): Don't check for null wrap_indent (wrap_here now
	guarantees that it isn't, and anyway we were only checking one out
	of the two places we dereferenced it).

Mon Aug  9 09:53:45 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* hppab-nat.c: Define ptrace to call_ptrace and pass the 5th arg
	there, rather than using an ANSI C specific macro.

Sun Aug  8 21:25:14 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (VERSION): bumped version to 4.9.88.

Sun Aug  8 13:59:49 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* ser-unix.c (hardwire_send_break) [HAVE_SGTTY]: Use select not
	usleep.

Sun Aug  8 13:59:49 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* inflow.c (terminal_init_inferior): Don't muck with tty state if
	gdb_has_a_terminal() is false.

Sun Aug  8 10:58:23 1993  Fred Fish  (fnf@cygnus.com)

	* elfread.c, dwarfread.c:  Revert changes since 4.9.87.  They
	are too risky for installing this close to a release.

Sat Aug  7 10:59:03 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* elfread.c (elf_symtab_read):  Properly sort out the bss symbols
	from the data symbols and give them the correct minimal_symbol_type.
	Add file static symbols to the minimal symbol table, not just
	global symbols.  Add absolute symbols as well (like _edata, _end).
	Redo stabs-in-elf special symbol handling now that file static
	symbols are entered into the into the minimal symbol table.
	* dwarfread.c (add_partial_symbol):  Add comment about limitations
	of DWARF symbols for distinguishing data from bss when adding
	minimal symbols.  Add file local symbols to minimal symbols.

Fri Aug  6 08:08:32 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (VERSION): bumped version to 4.9.87.

Thu Aug  5 18:14:06 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/i386/tm-i386bsd.h (NUM_REGS):  There are only ten,
	not eleven.

Wed Aug  4 07:41:55 1993  Fred Fish  (fnf@cygnus.com)

	* inflow.c (pass_signal):  Signal handlers take one int arg;
	supply an unused one to make it type compatible as an arg to
	signal().

	* Makefile.in (VERSION): bumped version to 4.9.86.

Tue Aug  3 15:34:57 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (ALLCONFIG):  Add config/i386/i386nw.mt,
	config/m68k/delta68.mh, config/m68k/delta68.mt,
	config/m68k/dpx2.mh, config/m68k/dpx2.mt, config/mips/riscos.mh,
	config/mips/news-mips.mh.
	* Makefile.in (ALLPARAM):  Add config/i386/nm-symmetry.h,
	config/i386/tm-i386nw.h, config/m68k/nm-delta68.h,
	config/m68k/tm-delta68.h, config/m68k/xm-delta68.h,
	config/m68k/nm-dpx2.h, config/m68k/tm-dpx2.h,
	config/m68k/xm-dpx2.h, config/mips/xm-makeva.h.
	* Makefile.in (ALLDEPFILES):  Add dpx2-nat.c.

Tue Aug  3 15:21:35 1993  Stu Grossman  (grossman at cygnus.com)

	* Makefile.in:  Add i386lynx-tdep to the right places.

	* i386lynx-nat.c (i386lynx_saved_pc_after_call):  Move into
	i386lynx-tdep.c.
	* i386lynx-tdep.c:  New module for Lynx/386 target dependant code.
	* config/i386/i386lynx.mh (NATDEPFILES):  Remove exec.o.
	* config/i386/i386lynx.mt (TDEPFILES):  Add exec.o, i386lynx-tdep.o.
	* config/i386/nm-i386lynx.h:  Add target_pid_to_str().
	* config/i386/tm-i386lynx.h:  Remove target_pid_to_str().

	* Makefile.in (TARDIRS):  Add gdbserver.

Tue Aug  3 14:27:11 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	* Makefile.in (ALLDEPFILES): added remote-bug.c.
	  (remote-bug.o): new rule.

Tue Aug  3 11:02:35 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (SFILES):  Add thread.c

Mon Aug  2 16:35:31 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	* Makefile.in (VERSION): bumped version to 4.9.85.

	* remote-monitor.c: updated copyright.
	  (bug_ops, monitor_desc): now static.
	  (monitor_desc): in several places, check and/or set to NULL.

	* remote-hms.c (hms_files_info): Add the appropriate items where
	  missing in the printf call.

	* remote-bug.c: new file for m88k bug support.

	* config/m88k/m88k.mt (TDEPFILES): added remote-bug.o.

Mon Aug  2 14:22:09 1993  Steve Chamberlain  (sac@phydeaux.cygnus.com)

	* h8300-tdep.c:  Use new variable h8300hmode.

Mon Aug  2 12:06:00 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* valops.c (typecmp): If we are passing a non-reference to a function
	which takes a reference, pass the address.
	(value_arg_coerce): Don't use COERCE_ENUM; we don't want to dereference
	references here.

	* thread.c (thread_switch): Define as static.
	(add_thread): Cast return value from xmalloc.

	* gdbtypes.c (fill_in_vptr_fieldno): Call check_stub_type.
	* gdbtypes.{c,h}: Improve comments on vptr_fieldno.

Mon Aug  2 11:58:52 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* README:  Elaborate on gdb C++ support and cfront support.

Mon Aug  2 11:30:57 1993  Stu Grossman  (grossman at cygnus.com)

	* i386lynx-nat.c, thread.c, thread.h:  Update copyrights.

Mon Aug  2 12:06:00 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (ALLDEPFILES): Add i386lynx-nat.c.

Mon Aug  2 08:42:50 1993  Stu Grossman  (grossman at cygnus.com)

	* gdbserver/remote-inflow.c (create_inferior):  Fix comments, and
	error msg.  Setup seperate process group for child.
	* (write_inferior_memory):  Sleep for 1 second and retry on ptrace
	failure.

Sun Aug  1 22:58:18 1993  Stu Grossman  (grossman at cygnus.com)

	* config/i386/i386lynx.mh (NATDEPFILES):  Drop coredep (for now).
	* config/i386/nm-i386bsd.h:  Protect from multiple inclusion.
	* config/i386/nm-i386lynx.h:  Lotsa new host porting stuff.
	* config/i386/tm-i386lynx.h:  Define SAVED_PC_AFTER_CALL and
	target_pid_to_str.

	* Makefile.in (CLIBS):  Reorder to make Lynx ld happy.
	* (HFILES):  New file thread.h.
	* (OBS):  New file thread.c.
	* configure.in:  Host config for Lynx/386.
	* fork-child.c (fork_inferior):  Call init_thread_list().
	* infrun.c (resume):  Add pid to invocation of target_resume().
	* (wait_for_inferior): Pay attention to pid from target_wait().
	Multi-threading code now uses this to determine what to do.
	* inftarg.c (child_wait):  Conditionalize based on CHILD_WAIT macro.
	Use target_pid_to_str() macro throughout when printing pid.
	* inferior.h (child_resume):  Add pid to prototype.
	* hppab-nat.c hppah-nat.c infptrace.c (child_resume):  Pass in pid as
	argument, instead of using inferior_pid.
	* procfs.c (procfs_resume):  Pass in pid as argument.  Ignored for
	now.  Use target_pid_to_str() macro throughout for printing process id.
	* remote-adapt.c (adapt_resume):  Pass in pid as argument.
	* remote-eb.c (eb_resume):  Pass in pid as argument.
	* remote-es.c (es1800_resume):  Pass in pid as argument.
	* remote-hms.c (hms_resume):  Pass in pid as argument.
	* remote-mips.c (mips_resume):  Pass in pid as argument.
	* remote-mm.c (mm_resume):  Pass in pid as argument.
	* remote-monitor.c (monitor_resume):  Pass in pid as argument.
	* remote-nindy.c (nindy_resume):  Pass in pid as argument.
	* remote-sa.sparc.c (remote_resume):  Pass in pid as argument.
	* remote-sim.c (rem_resume):  Pass in pid as argument.
	* remote-st.c (st2000_resume):  Pass in pid as argument.
	* remote-udi.c (udi_resume):  Pass in pid as argument.
	* remote-vx.c (vx_resume):  Pass in pid as argument.
	* remote-z8k.c (rem_resume):  Pass in pid as argument.
	* remote.c (remote_resume):  Pass in pid as argument.
	* solib.c (solid_create_inferior_hook):  Pass inferior_pid to
	target_resume().
	* target.c (normal_pid_to_str):  New routine to print out process
	ID normally.
	* target.h (struct target_ops):  Add pid to prototype at
	to_resume().  (target_resume):  Add pid argument.
	* (target_pid_to_str):  Default definition for normal type pids.
	* thread.h, thread.c:  New modules for multi thread/process control.

Sun Aug  1 13:02:42 1993  John Gilmore  (gnu@cygnus.com)

	* README:  Say that bug-gdb is also the place to send requests
	for help with GDB.

Sun Aug  1 09:42:13 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (make-proto-gdb-1):  Use -f opt on rm of Makefile.
	* h8500-tdep.c:  Add parens around a few macro args.

Fri Jul 30 15:43:49 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* TODO: Remove items about unix-to-unix/rapp debugging (now we
	have gdbserver), moving xm files to subdirectory, ptype yylval,
	and file-local symbols.

	* gdbtypes.h: Improve comments about C++ methods.

Fri Jul 30 14:16:32 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* c-exp.y:  Add missing 5th arg for one call to lookup_symbol, cast
	NULL in all other calls to correct pointer types.

Fri Jul 30 15:43:49 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	From Jeffrey Law:
	* tm-hppa.h (TARGET_WRITE_PC): Define.
	* hppa-tdep.c (hppa_fix_call_dummy): If in a syscall,
	then return the address of the dummy itself rather than
	the address of $$dyncall.
	(target_write_pc): New function to store a new PC.

Fri Jul 30 12:51:27 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)
			  and Jim Kingdon (kingdon@cygnus.com)

	* breakpoint.c (breakpoint_re_set_one):  Always reparse breakpoint
	conditions, they might contain symbol table references.

Fri Jul 30 12:51:27 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mipsread.c (parse_symbol):  Handle opaque struct definitions and
	type naming for stTypedef symbols.

Fri Jul 30 14:44:21 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* c-exp.y (yylex): Detect C++ nested types.


Fri Jul 30 10:15:01 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (ALLCONFIG):  Add config/i386/ptx.mh

Fri Jul 30 08:58:01 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	From J. Law:
	* infcmd.c (read_pc): Remove PA specific code.
	* tm-hppa.h (TARGET_READ_PC): Define.
	* hppa-tdep.c (target_read_pc): New function.

	* symtab.c (gdb_mangle_name): Deal with it if type lacks a name.

Fri Jul 30 07:36:53 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* NEWS:  Add note that DEC alpha support is host only, not native.
	* README:  Emphasize that C++ support works best with GNU C++ and
	stabs debugging format.
	* delta68-nat.c:  Add missing FSF copyright.

Fri Jul 30 08:58:01 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* paread.c (pa_symtab_read): Put file-local symbols in minimal symbols.
	* hppa-tdep.c (frame_chain_valid): Check that our function has the
	same address as _start, not that it must be the same symbol.

Fri Jul 30 00:18:40 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (ALLDEPFILES):  Add delta68-nat.c
	* Makefile.in (delta68-nat.o):  Add dependency.

Thu Jul 29 12:09:46 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* value.h (COERCE_ENUM): Use COERCE_REF to coerce refs; value_ind
	was adequate in gdb 3.5 but not now.

	* valops.c (typecmp): An array in t2 matches a pointer in t1.

	* valops.c (typecmp): When comparing type1& to type2, compare
	type1 and type2 as leniently as if we were comparing type1 to
	type2.

	* cp-valprint.c (cplus_print_value): Don't dump core if the
	baseclass doesn't have a name.
	* values.c (vb_match): New function, which finds the virtual
	base class pointer even if the types are nameless.
	(baseclass_{addr,offset}): Use it.

	* hppa-tdep.c: Make "maintenance print unwind" command from old
	"unwind" command.

	* remote-udi.c: Remove udi_timer, call to siginterrupt, and associated
	obsolete junk which apparently had been copied from the
	pre-serial.h remote.c, but which is no longer used.

Thu Jul 29 12:36:20 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (NONSRC):  Need 29k-share/README, not
	29k-share/udi/README.

Thu Jul 29 12:09:46 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* paread.c (pa_symfile_init): If error reading string table, don't
	use errno in cases where it hasn't been set.

	* ser-unix.c (gdb_setpgid): Pass our pid, not 0, to setpgid.

	* remote-monitor.c (_initialize_monitor): Comment out use of
	connect_command, since connect_command itself is commented out.

	* remote-monitor.c (generic_open): Parse arguments the same way
	as remote.c.

	* hppa-tdep.c (pc_in_linker_stub): Fix unclosed comments.

Wed Jul 28 13:19:34 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/xm-mips.h: Define HAVE_TERMIOS.

	* dbxread.c (record_minimal_symbol): Don't put gcc_compiled or
	__gnu_compiled* symbols into the minimal symbols.

Wed Jul 28 08:26:58 1993  Ian Lance Taylor  (ian@cygnus.com)

	* remote-mips.c (_initialize_remote_mips): Added "timeout" and
	"retransmit-timeout" variables to set mips_receive_wait and
	mips_retransmit_wait, respectively.

Wed Jul 28 03:58:58 1993  (pes@regent.e-technik.tu-muenchen.de)

	* symmisc.c (dump_msymbols):  Handle new mst_file_* types.

Tue Jul 27 12:07:38 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-udi.c: Remove old comment about download not implemented.

	* serial.h, ser-{unix,go32,tcp}.c: Add flush_input and send_break.
	* nindy-share/*, remote-nindy.c: Extensive hacking to make it
	conform to GDB conventions like using memcpy not bcopy, serial.h,
	etc.  This is to make it host on Solaris, AIX, etc.
	* Makefile.in: Reflect removed nindy-share files.
	* config/i960/nindy960.mt (TDEPFILES): Remove ttybreak.o.

	* stack.c (print_frame_info): Revise comment about `pathological'
	case (there was a wrong FIXME about text labels; also asm() can
	trigger this as well as versions of ar which truncate .o names).

	* buildsym.c (start_subfile): If a .c file includes a .C file, set
	the language of both of them to C++.

	* config/sparc/xm-sun4os4.h: Define MEM_FNS_DECLARED and include
	<memory.h>.
	Include <malloc.h> rather than declaring malloc functions ourself.

	* ser-unix.c (set_tty_state): Don't ignore errors setting process
	group.
	* inflow.c (terminal_inferior): If attach_flag set, ignore errors
	from set_tty_state.

	* fork-child.c (fork_inferior): Only quote exec file if needed.

	* mipsread.c (parse_symbol): Remove 21 Jul 93 change with
	stTypedef inside an stBlock.

Tue Jul 27 12:36:49 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* breakpoint.c (breakpoint_1):  Walk the breakpoint chain to decide if
	we have breakpoints or watchpoints as we might have to ignore internal
	breakpoints.

	Fix gdb core dumps after `file newfile' commands.
	* symtab.h, symfile.c (clear_symtab_users):  New routine which
	unconditionally clears symtab users. clear_symtab_users_once
	commented out as it was a noop anyway.
	* objfiles.c (free_objfile):  Don't call clear_symtab_users_once.
	* objfiles.c (free_all_objfiles), symfile.c (new_symfile_objfile),
	xcoffexec.c (exec_close):  Call clear_symtab_users if necessary.
	* symfile.c (syms_from_objfile):  Install cleanups for errors during
	symbol reading.
	* coffread.c, dbxread.c, mipsread.c, xcoffread.c (*_symfile_read):
	Lint cleanup code, call do_cleanups explicitly.
	* symfile.c (symbol_file_add):  Call new_symfile_objfile and
	reinit_frame_cache _after_ the new symbols are read in.

Tue Jul 27 01:57:01 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mipsread.c (parse_type):  Do not set tag name for compiler
	generated fake tag names.

Mon Jul 26 17:31:49 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* config/m88k/m88k.mt (TDEPFILES): add exec.o.

Mon Jul 26 13:17:36 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* hppa-tdep.c: Remove all uses of use_unwind and `set use_unwind'
	command.  Now we use unwind info by default if we can find it.

	* config/sparc: Move VARIABLES_INSIDE_BLOCK and SUN_FIXED_LBRAC_BUG
	to tm-sparc.h so they are shared between Solaris and SunOS4.
	* dbxread.c (process_one_symbol): Deal with SunOS4 acc N_STSYM and
	N_GSYM functions.

	* config/pa/tm-hppa.h (REGISTER_NAMES): Use "fr" rather than "fp"
	for floating point registers.

	* mipsread.c (parse_symbol): Put stStaticProc symbols in minimal
	symbols as mst_file_text.

	* hppa-tdep.c (pc_in_linker_stub): Return 0 if can't read memory.

	* stabsread.c (rs6000_builtin_type): Make logical types be
	TYPE_CODE_BOOL.

Sun Jul 25 23:41:48 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* breakpoint.{c,h} (struct breakpoint): Replace symtab field with
	source_file field.

Fri Jul 23 09:57:25 1993  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote.c: Don't error() on errors xferring memory.
	* target.h: Clean up comments about *xfer_memory.

	* exec.c, corelow.c (target_ops struct): Don't allow
	{insert,remove}_breakpoints to be defaulted to
	memory_{insert_remove}_breakpoint.

	* demangle.c: Make it so `help set dem' tells you how to get the
	list of demangling styles.

Thu Jul 22 15:41:09 1993  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* Makefile.in: Use REMOTE_O macro not remote.o.
	* config/i960/{nindy960,vxworks960}: Don't use remote.o.

Thu Jul 22 12:43:25 1993  Ian Lance Taylor  (ian@cygnus.com)

	* coredep.c: If NEED_SYS_CORE_H defined, include <sys/core.h>
	(can't include it in nm-*.h file because it causes conflicts with
	a.out symbol definitions).
	* hp300ux-nat.c (fetch_core_registers): Commented out; obsolete.
	* config/m68k/hp300hpux.mh (NATDEPFILES): Added coredep.o and
	corelow.o.
	* config/m68k/nm-hp300hpux.h (NEED_SYS_CORE_H): Defined.
	(REGISTER_U_ADDR): Defined.
	* config/m68k/xm-hp300hpux.h (HAVE_TERMIOS): Define instead of
	HAVE_TERMIO.
	* config/pa/xm-hppah.h: Likewise.

Wed Jul 21 11:37:30 1993  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* mipsread.c (parse_symbol): when stTypedef and friends occur within
	an stBlock, skip over the fields of the inner one.

	* mips-tdep.c (init_extra_frame_info): If in lenient prologue, call
	heuristic_proc_desc rather than just assuming registers not saved.

	* Makefile.in (regex.o): Add dependency.

	* hppa{b,h}-nat.c: Warning, not error, if can't access registers.

	* config/pa/hppa{b,h}.h: Define ATTACH_DETACH.

Wed Jul 21 03:07:30 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/mips/xm-makeva.h:  New file implements va_list alignment
	restrictions for mips hosts.
	* config/mips/{xm-irix3.h, xm-mips.h, xm-news-mips.h, xm-riscos.h}:
	Use it.

Wed Jul 21 00:11:05 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mips-tdep.c (init_extra_frame_info):  Do not check for
	mips_in_lenient_prologue if it is a dummy frame.
	* mipsread.c (fixup_sigtramp):  Initialize pdr.adr, it is used by
	mips_in_lenient_prologue.

Tue Jul 20 12:53:47 1993  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* mips-tdep.c (heuristic_proc_start): First time we print the
	warning, elaborate.
	(_initialize_mips_tdep): Improve docstring for `set heur'.

	* config/rs6000/tm-rs6000.h: Remove call to insert_step_breakpoint.

	* symtab.c (find_line_symtab): New function, to deal with multiple
	symtabs with the same name.
	(find_line_pc{,_range}): Use it.
	(find_pc_symtab): Add comment about overlapping symtabs.

Mon Jul 19 21:29:14 1993  Fred Fish  (fnf@deneb.cygnus.com)

	* Makefile.in (SFILES):  Add nlmread.c.
	* Makefile.in (OBS):  Add nlmread.o.
	* Makefile.in (nlmread.o):  Add new target.
	* configure.in (i[34]86-*-netware):  New configuration.
	* nlmread.c, config/i386/{i386nw.mt, tm-i386nw.h}:  New files
	for NLM/NetWare support.

Mon Jul 19 11:48:57 1993  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* symtab.h (enum minimal_symbol_type): Add mst_file_*.
	* partial-stab.h [DBXREAD_ONLY]: Record statics in miminal symbols.
	* dbxread.c (record_minimal_symbol): Deal with statics.
	* minsyms.c (lookup_minimal_symbol): Prefer externals to statics.

	* config/i386/xm-i386sco.h: Define HAVE_TERMIOS.

	* printcmd.c, config/pa/xm-pa.h, config/alpha/xm-alpha.h: Make it so
	arg_bytes field of makeva_list is always aligned.
	* config/pa/xm-pa.h: Make arglist_address a char *.

	* ser-unix.c: Don't try to use job control with termio.

Sun Jul 18 23:11:28 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)
			  and Jim Kingdon (kingdon@cygnus.com)

	Make breakpoint_re_set_one work with overloaded member functions,
	`b 123' and `b foo' if foo is a static function.
	* symtab.c (decode_line_1, decode_line_2):  New argument `canonical'
	to return canonical line specs if requested by the caller.
	* breakpoint.c, source.c, symtab.c, symtab.h:  Change prototypes and
	callers accordingly.
	* symtab.c (build_canonical_line_spec):  New helper function which
	constructs the canonical line spec.
	* breakpoint.c (break_command_1):  Use canonical line spec instead
	of command string as addr_string if necessary.
	* source.c (line_info):  Fix storage leak.

Sun Jul 18 15:22:45 1993  Jim Kingdon  (kingdon@rtl.cygnus.com)

	* infptrace.c: Split out define of PT_KILL; Sequent defines PT_KILL
	but not the others.
	* symm-tdep.c: Remove exec_file_command.
	[_SEQUENT_] (ptx_coff_regno_to_gdb, register_addr): New functions.
	A few miscellaneous cleanups.
	* symm-nat.c: Renamed from symm-xdep.c.
	* All symmetry dependent files: Many changes.

	* mips-tdep.c (mips_skip_prologue): New argument lenient.
	Use read_memory_nobpt.
	(is_delayed, mips_in_lenient_prologue): New functions.
	(init_extra_frame_info): If in the prologue, don't use saved registers.
	* config/mips/tm-mips.h: Declare mips_skip_prologue.

	* partial-stab.h (N_SO): Add the text offset to valu before, not after,
	passing it to END_PSYMTAB.

Fri Jul 16 18:48:52 1993  Jim Kingdon  (kingdon@rtl.cygnus.com)

	* symtab.c (find_pc_symtab): Call warning, not printf directly.

	* solib.c (solib_add): Use x{re,m}alloc, not {re,m}alloc.

Fri Jul 16 09:56:42 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mipsread.c: No longer need to undefine ZMAGIC.

Thu Jul 15 18:03:37 1993  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* m88k-pinsn.c: Moved code into opcodes/m88k-dis.c.
	(print_insn): Now just calls print_insn_m88k.

Thu Jul 15 14:54:05 1993  Doug Evans  (dje@canuck.cygnus.com)

	* h8300-tdep.c (examine_prologue): Make prototype match definition.

Thu Jul 15 08:34:49 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* NEWS: Mention that remote.c now has a `load' operation.

	* hppa-tdep.c (pc_in_linker_stub): New function.
	(find_proc_framesize): Return 0 for linker stubs.
	(rp_saved): Tell the caller where rp is saved.
	(frame_chain_valid): Return 1 for linker stubs.
	(frame_saved_pc): Use return value from rp_saved.

	* stack.c (print_frame_info): When checking PC_IN_CALL_DUMMY,
	pass the sp relative to the frame in question, not the sp in the
	innermost frame.

Wed Jul 14 17:37:03 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* mipsread.c (parse_procedure): Take as argument the symtab to look
	the name up in.  Look it up with mylookup_symbol, not lookup_symbol.
	(psymtab_to_symtab_1): For stabs, pass the symtab to parse_procedure.

	* mipsread.c (mylookup_symbol): Use strcmp, not STREQ, as we have
	already checked the first characters.

	Changes from Jeffrey Law:
	* printcmd.c (makeva_list): Use MAKEVA_EXTRA_INFO to define
	machine dependent fields in the makeva_list structure.
	(makeva_size): Allocate extra space to handle gaps made by
	alignment restrictions.
	* config/pa/xm-pa.h (MAKEVA_EXTRA_INFO): Define.
	(MAKEVA_START): Initialize arglist_address field.
	(MAKEVA_ARG): Always store arguments on natural alignment 
	boundaries.  Set arglist_address to the address right after
	the args.  
	(MAKEVA_END): Simply return the value stored in arglist_address.

Wed Jul 14 13:51:54 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* ch-valprint.c (chill_val_print, case TYPE_CODE_STRING): Print
	address, not addr.

	* hppah-nat.c (store_inferior_registers): Don't print i in cases
	where we aren't using it.

	* a29k-tdep.c (get_saved_register): Fix typo.

Wed Jul 14 09:45:52 1993  Doug Evans  (dje@canuck.cygnus.com)

	* configure.in: Recognize h8300h (variant of h8300).


Tue Jul 13 14:03:48 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (define_symbol): Make the caddr_t hack apply to `function
	returning foo' as well as `pointer to foo'.

	* remote.c [REMOTE_BREAKPOINT]: Use for breakpoint insn if defined.
	* config/m68k/tm-m68k.h: Define it.
	* mem-break.c, breakpoint.c: Improve comments.

Tue Jul 13 13:35:31 1993  Frederic Pierresteguy (F.Pierresteguy@frcl.bull.fr)

	* config/m68k/tm-dpx2.h: Replace "tm-68k.h" with "m68k/tm-m68k.h".
	* config/m68k/xm-dpx2.h: Define HAVE_TERMIOS not HAVE_TERMIO.

Tue Jul 13 11:50:38 1993  Doug Evans  (dje@canuck.cygnus.com)

	* gdbcore.h (read_memory_integer, read_memory_unsigned_integer):
	Make prototype match definition.

Tue Jul 13 11:15:15 1993  Fred Fish  (fnf@cygnus.com)

	* elfread.c:  Remove notice about file still being under
	construction.
	* Makefile.in (ultra3-xdep.o, umax-xdep.o):  Add missing ')'.

Mon Jul 12 17:46:35 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* a29k-tdep.c (read_register_stack): Make val static.

Mon Jul 12 14:10:48 1993  Doug Evans  (dje@canuck.cygnus.com)

	* config/h8300/tm-h8300.h (REGISTER_CONVERTIBLE): Change value to 0.
	(REGISTER_CONVERT_TO_VIRTUAL, REGISTER_CONVERT_TO_RAW): Move def'n to
	usual spot.

Mon Jul 12 11:29:44 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* c-valprint.c (c_val_print): Fix thinko with unspecified length
	arrays.

	* hppa-tdep.c (find_proc_framesize): If there is a frame pointer,
	use it.

Sun Jul 11 19:35:05 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* symtab.c (decode_line_1): Use end of block to figure out whether
	val.end is in the same function, not minimal symbols.

	* source.c (line_info): Add a few more wrap_here's.

	* i386-tdep.c (i386_follow_jump): Do byteswapping where needed and
	don't make assumptions about sizes of host data types.

	* blockframe.c, symtab.h (find_pc_partial_function): New arg endaddr.
	* infrun.c, breakpoint.c, printcmd.c: Change callers.
	* printcmd.c (containing_function_bounds): Remove.
	* printcmd.c (disassemble_command): Use find_pc_partial_function,
	not containing_function_bounds.
	* infcmd.c (step_1): Use find_pc_partial_function rather than
	trying to roll our own.  Move check for a pc between SIGTRAMP_START and
	SIGTRAMP_END in find_pc_partial_function, not step_1.

	* sparc-tdep.c (sparc_frame_chain, frame_saved_pc):
	Keep unswapped value in array of char, not REGISTER_TYPE.
	Use REGISTER_RAW_SIZE not sizeof (REGISTER_TYPE).
	(sparc_extract_struct_value_address): Use TARGET_PTR_BIT not
	sizeof (CORE_ADDR).

Thu Jul  1 15:50:05 1993  Frederic Pierresteguy (F.Pierresteguy@frcl.bull.fr)

	* configure.in (m68*-bull-sysv*): added support for Bull dpx2.
	* config/m68k/{t,x,n}m-dpx2.h, dpx2-nat.c: New files.
	* config/m68k/dpx2.m{h,t}: New files.

Sun Jul 11 12:32:08 1993  Doug Evans  (dje@canuck.cygnus.com)

	* config/sparc/tm-sparc.h (PRINT_REGISTER_HOOK): Fix typo, add
	more parens around macro arg.

Sat Jul 10 09:54:17 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c: Remove step_resume_{duplicate,shadow}.  Replace
	step_resume_break_address with step_resume_breakpoint (now local
	to wait_for_inferior).
	({insert,remove}_step_breakpoint): Remove.
	(wait_for_inferior): Set step resume break with
	set_momentary_breakpoint.  Test hitting it with bpstat_stop_status
	and bpstat_what	(stop_step_resume_break removed).
	* breakpoint.{h,c}, infrun.c: Return value from bpstat_what now struct
	which includes previous return value as main_action, and a step_resume
	bit.
	* breakpoint.c (delete_breakpoint): If breakpoint was inserted, and
	there is another breakpoint there, insert it.
	* infrun.c (wait_for_inferior): Rearrange the spaghetti a bit.  Use
	a few more gotos.
	Various: Clean up and add comments.

	* infrun.c [TDESC]: Remove remaining tdesc code (see ChangeLog
	for Wed Nov 13 16:45:13 1991).

Fri Jul  9 12:36:46 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* values.c, value.h (modify_field), callers: Make fieldval a LONGEST.

	* h8300-tdep.c (NEXT_PROLOGUE_INSN): Make pword1 an INSN_WORD *
	not short *.

	* findvar.c, defs.h
	({extract,store}_{signed_integer,unsigned_integer,address}):
	New routines to replace SWAP_TARGET_AND_HOST.
	All over: All uses of SWAP_TARGET_AND_HOST on integers replaced.

	* config/sparc/tm-sparc.h: Add comment suggesting that removing
	ins and locals from the registers array might clean things up.

	* utils.c: Clean up comments about wrap buffer and wrap_here.
	* printcmd.c (printf_command): Call wrap_here before vprintf.

	* mipsread.c (cross_ref): Set the name to unknown for "struct *" case.
	Patch from ptf@delcam.co.uk (Paul Flinders).

	* a29k-tdep.c, findvar.c (get_saved_register): Fix byteswapping sins.

Fri Jul  9 09:47:02 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* defs.h, remote-eb.c (TM_FILE_OVERRIDE):  Remove it.
	* mips-tdep.c (init_extra_frame_info):  Set proper fci->frame if pc
	is at the start of the dummy code.

Thu Jul  8 14:48:54 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* sparc-tdep.c (sparc_push_dummy_frame): Skip all the do_save_insn
	stuff, just write the sp and fp.
	(sparc_pop_frame): Skip the do_restore_insn; we already restore
	the sp with the other out registers.

	* hppa-tdep.c (hppa_push_arguments): Allocate enough space for
	arguments.

	* hppa-tdep.c: Change _initialize_hppab_tdep to _initialize_hppa_tdep.


Thu Jul  8 08:22:05 1993  Doug Evans  (dje@canuck.cygnus.com)

	* config/h8300/tm-h8300.h: (REGISTER_TYPES): Adjust for h8/300h.
	(REGISTER_RAW_SIZE): Ditto.
	(REGISTER_VIRTUAL_TYPE): Use builtin_type_unsigned_long for regs
	on the h8/300h (ints may still be 16 bits).
	(EXTRACT_RETURN_VALUE, STORE_RETURN_VALUE,
	EXTRACT_STRUCT_VALUE_ADDRESS): Add FIXME's for h8/300h.  Some
	thought needed here.

	* h8300-tdep.c (print_insn): Call print_insn_h8300h if h8/300h.
	(examine_prologue): reg_save_depth is 4 if h8/300h.

	* findvar.c (read_register): Provide some support for 64 bit regs.
	(write_register): Ditto.

Wed Jul  7 14:30:00 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/nm-riscos.h: machine/machparam.h is always the right
	place to look for BSD43_NBPG, not machine/vmparam.h

	* infcmd.c (run_stack_dummy): New argument name.
	Change error message in (another) attempt to make it comprehensible.
	* valops.c (call_function_by_hand): Pass name to run_stack_dummy.
	* symtab.h: Declare demangle and asm_demangle since macros use them.

	* eval.c (evaluate_subexp): Add comment about calling a member
	function of a variable in a register.

	* expression.h: Clean up comment about string in STRUCT_STRUCT etc.

	* config/{rs6000/tm-rs6000.h,sparc/tm-sparc.h,pyr/tm-pyr.h},
	inferior.h (PC_IN_CALL_DUMMY) [ON_STACK]: Add comments about stack
	frame tops and bottoms.

	* frame.h, blockframe.c, stack.c, a29k-tdep.c,
	config/gould/tmp-{pn,np1}.h,
	config/{sparc/tm-sparc.h,pyr/tm-pyr.h,vax/tm-vax.h}: Remove field
	next_frame from struct frame_info.  It has no purpose beyond
	->next->frame and is an artifact from GDB 2.8.

Tue Jul  6 11:51:18 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in: Remove gdb before creating a new one.
	Update init.c atomically.

	* Makefile.in (ALLPARAM): Add config/{alpha/xm-alpha.h,pa/xm-pa.h}.
	(ALLCONFIG): Add config/alpha/alpha-osf1.mh.

	* infcmd.c (_initialize_infcmd): In docstring for "continue",
	describe argument as setting ignore count.

Sun Jul  4 15:04:47 1993  Doug Evans  (dje@cygnus.com)

	* h8300-tdep.c (examine_prologue): Fix call to
	read_memory_unsigned_integer.

Fri Jul  2 18:22:54 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/{x,n}m-irix{3,4}.h: Make some definitions here
	rather than including xm-bigmips.h.

	* eval.c (evaluate_subexp): Improve error messages for OP_TYPE and
	default cases.

	* Makefile.in (distclean): Remove y.tab.h.

Fri Jul  2 14:55:48 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* exec.c (exec_file_command):  Remove Mar 28 hack as BFD handles
	file updates properly now.
	* mipsread.c (mips_coff_new_init):  Force reevaluation of sigtramp
	addresses if switching to a new symbol file.
	* dbxread.c (process_one_symbol):  Avoid dereferencing NULL
	symbols that might be returned from define_symbol.

Fri Jul  2 13:33:12 1993  Steve Chamberlain  (sac@phydeaux.cygnus.com)

	New target macros for getting at the pc, sp and fp.
	* infcmd.c (read_pc, write_pc):  Modify to use new macros.
	(read_sp, write_sp, read_fp, write_fp): New functions.
	* blockframe.c (reinit_frame_cache, get_prev_frame_info):
	Use new functions.
	* breakpoint.c (bpstat_alloc): ditto.
	* infrun.c (wait_for_inferior): ditto.
	* stack.c (print_frame_info): ditto.
	* valops (call_function_by_hand): ditto.
	* corelow.c (core_open): ditto.
	* h8500-tdep.c: (target_read_sp, target_write_sp, target_read_pc,
	target_write_pc, target_read_fp, target_write_fp): New functions.
	* inferior.h (read_sp, write_sp, read_fp, write_fp): Prototypes.

	* config/alpha/xm-alpha.h: Add MAKEVA_END.
	* config/h8500/tm-h8500.h: Define new macros.

Fri Jul  2 13:51:04 1993  Ian Lance Taylor  (ian@cygnus.com)

	* configure.in (mipos-*-riscos*): New host and target; use riscos.
	* config/mips/nm-riscos.h: If BSD43_NBPG is not defined by
	vmparam.h, include machparam.h.
	(KERNEL_U_ADDR): Define to be BSD43_UADDR.

Fri Jul  2 13:39:48 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* c-exp.y (yylex): Give error if unmatched single quote.

	* configure.in, config/m68k/*delta68*, delta68-nat.c: New port.

	* Remove unused STACK_END_ADDR in the following files (in other
	files it is used for something): tm-mips.h, tm-sun2.h, tm-news.h,
	tm-a29k, tm-i386v.h, tm-hppa.h, tm-nindy960.h, tm-amix.h,
	tm-hp300hpux.h, tm-isi.h.

Thu Jul  1 09:51:27 1993  Jim Kingdon  (kingdon@cygnus.com)

	* config/mips/nm-riscos.h: Define NBPG and UPAGES.
	config/mips/xm-riscos.h: Include <sys/types.h>.

	* ser-unix.c (hardwire_noflush_set_tty_state): Use an assignment,
	not an initializer, to copy the structure.

	* gdbtypes.h (struct type): Add field tag_name.
	* gdbtypes.c (type_name_no_tag), c-typeprint.c (c_type_print_base):
	Use it.
	* {coff,dwarf,mips,stabs}read.c: Set it.

	* xm-sysv4.h: Undefine HAVE_TERMIO.

	* config/mips/nm-riscos.h: Remove unmatched #endif.
	Define FETCH_INFERIOR_REGISTERS.
	* config/mips/riscos.mh: Don't include coredep.o; mips-nat.o is enough.
	Fix misspelling of NAT_FILE.
	* mips-nat.c (fetch_core_registers): If KERNEL_U_ADDR is not defined,
	we can still process "modern" core files.

	* ser-unix.c (hardwire_print_tty_state) [HAVE_TERMIOS]: Don't
	print c_line.
	(_initialize_ser_hardwire): Just check whether _POSIX_JOB_CONTROL
	is defined; don't care what it is defined to.

Wed Jun 30 20:06:46 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/vax/xm-vaxult2.h: Define FD_SET and FD_ZERO.

Tue Jun 29 11:02:58 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* inftarg.c: Remove unused include of terminal.h.
	* signals.h: Don't undefine signals anymore.
	* main.c: Use job_control from serial.h.
	* fork-child.c (fork_inferior): Use gdb_setpgid.
	* serial.h, ser-unix.c, ser-go32.c: Provide gdb_setpgid.
	* utils.c (quit): Use current_target->to_terminal_ours to figure
	out whether we care about lack of job control, rather than __GO32__.
	* utils.c: Include serial.h not terminal.h
	(quit): Use job_control not TIOCGPGRP.
	* terminal.h: Don't undefine TIOCGPGRP.
	* serial.h, ser-unix.c, ser-go32.c, ser-tcp.c: Add SERIAL_FLUSH_OUTPUT.
	* utils.c (quit): Use it.
	* serial.h: Add SERIAL_UN_FDOPEN.
	* utils.c (quit): Use it.
	* ser-unix.c: Add process group to ttystate.
	[HAVE_SGTTY]: Add tchars, ltchars, and lmode to ttystate.
	* inflow.c: Include serial.h not terminal.h.
	Use serial.h stuff to replace most of the maze of #ifdef's.
	* inflow.c, main.c, inferior.h: make gdb_has_a_terminal a function.
	* serial.h: Document SERIAL_SET_TTY_STATE as being immediate.
	* ser-unix.c: Use TIOCSETN not TIOCSETP so it is true.
	* serial.h, ser-unix.c, ser-go32.c, ser-tcp.c:
	Add SERIAL_PRINT_TTY_STATE, SERIAL_NOFLUSH_SET_TTY_STATE, and
	SERIAL_SET_PROCESS_GROUP.
	* inflow.c: Use them.
	* config/xm-svr4.h, config/rs6000/xm-rs6000.h, config/sparc/sun4os4.h:
	Define HAVE_TERMIOS.
	* Various: Remove all use of TIOC*_BROKEN.

Wed Jun 30 12:20:51 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/m68k/tm-sun3.h (BELIEVE_PCC_PROMOTION_TYPE): Define.

Tue Jun 29 13:44:41 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* target.h (target_detach):  Turn macro into function.
	* target.c (target_detach):  Define it, do deferred register stores
	before calling the real target function.

Tue Jun 29 13:15:42 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)
			  and Jim Kingdon (kingdon@cygnus.com)

	* symtab.h (BLOCK_SHOULD_SORT):  Do not sort blocks corresponding to
	a function to avoid printing of function arguments in wrong order
	due to sorting.
	* symfile.c (compare_symbols):  Remove code for sorting arguments
	as blocks containing arguments are no longer sorted.
	* symtab.c (lookup_block_symbol):  Update comment accordingly.

Tue Jun 29 11:02:58 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/pa/tm-hppa.h: Remove unused ARGS_GROW_DOC.
	(REG_STRUCT_HAS_ADDR): Add comment.

	* infrun.c (wait_for_inferior): Use find_pc_line not find_pc_symtab
	to check whether there is line number information.

Tue Jun 29 08:29:17 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* remote-udi.c: Fix docstring so that it compiles.

	* remote-mips.c, remote-nindy.c: move bfd.h before symfile.h
	(for file_ptr).

Tue Jun 29 09:11:27 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dbxread.c (process_one_symbol): If we find a LOC_BLOCK where we
	don't expect it, change it to LOC_STATIC so at least we don't coredump.

	* c-typeprint.c (c_type_print_base): Don't error() on invalid type.

	* symtab.h: Add comments about line numbers.
	* source.c (identify_source_line): Fix off by one bug with line.

Mon Jun 28 10:09:08 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (makeva*): New interface, for making a va_list.
	(printf_command): Use it.
	* config/m88k/xm-delta88.h: Remove VPRINTF define, not needed.
	* config/pa/xm-pa.h: New file.
	* config/pa/xm-hppa{b,h}.h: Include it.

	* xcoffread.c: Remove obsolete NO_TYPEDEFS comment.

Sun Jun 27 08:54:55 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* valprint.c (val_print_type_code_int):  Fix off by one error with
	eliminating leading zeroes for large little endian integers.

Sun Jun 27 08:58:56 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/riscos.mh (CC): Use -systype sysv.

	* ser-unix.c: Move #include of <sys/time.h> to HAVE_SGTTY section.

	* Makefile.in (ALLPARAM): Add config/mips/{x,n}-{news-mips,riscos}.h.

Fri Jun 25 11:22:28 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/tm-m68k.h: Remove obsolete comment about duplicating
	CALL_DUMMY between different 68k machines.

Fri Jun 25 17:02:45 1993  Stu Grossman  (grossman at cygnus.com)

	* gdbserver/Makefile.in:  Add dependancies on server.h.
	* gdbserver/remote-gutils.c:  Remove lots of unused functions and
	variables.
	* gdbserver/remote-inflow.c:  Remove lots of unused variables and
	#includes.  Also, use PTRACE_* symbols instead of constants. 
	(mywait):  Surround calls to wait() with enable/disable_async_io()
	so that we can be interrupted from GDB while waiting for the
	child.  Also, handle child exit more gracefully.
	* gdbserver/remote-server.c:  Remove lots of unused variables.
	Move all extern defs into server.h.  Redo main loop so that
	failure from getpkt() causes communications to be re-established.
	Fix 'k' command so that it restarts the child.
	* gdbserver/remote-utils.c:  Remove lots of unloved vars and
	subrs.  Move many extern decls into server.h.  (remote_open):  For
	tcp, seperate usage of proto fd from connected fd.  Close proto
	fd after getting connection.  (putpkt/getpkt):  Pay attention to
	errors when reading/writing.  Report these to the caller.  New
	routines input_interrupt/enable_async_io/disable_async_io to make
	it possible to get an I/O interrupt when data arrives from the
	comm link.
	* serial.h:  New file to contain common defs for all remote files.

Fri Jun 25 17:02:45 1993  Stu Grossman  (grossman at cygnus.com)

	* remote.c:  Add arg names to prototypes, in a modest effort at
	clarification.  Also add prototypes for some new functions.
	* (remote_wait):  Better error reporting for 'T' responses.
	* ser-go32.c (strncasecmp):  Make str1 & str2 be const.
	* (dos_async_init):  Make usage message reflect requested port #.
	* ser-tcp.c (tcp_open):  Terminate hostname properly to prevent
	random hostname lookup failures.  Add nicer message for unknown
	host error.  (wait_for):  Wake up in case of exceptions.  Also,
	restart select() if we got EINTR.
	* ser-unix.c (wait_for):  Restart select() if we got EINTR.
	* serial.c: (serial_close):  Clean up code.

Fri Jun 25 11:22:28 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/tm-m68k.h: Remove obsolete comment about duplicating
	CALL_DUMMY between different 68k machines.

Fri Jun 25 11:22:28 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (*.tab.c): Use ./c-exp.tab.c not just c-exp.tab.c.
	Make comment explaining this comprehensible.
	(TAGFILES): Include ALLDEPFILES.
	(ALLDEPFILES): udi2soc.c and udr.c are in 29k-share/udi, not
	29k-share/udi/udi.
	(update-alldeps): Remove; obsolete.

	* remote.c: Move comments regarding packets to top of file with the
	rest of the protocol comments.
	Fix incorrect description of 'T' response.

	* README (Reporting Bugs): Refer people to the GDB manual.

	* c-valprint.c (c_val_print): Handle TYPE_CODE_BOOLEAN.
	* stabsread.c: Type -16 is 4 bytes.

	* remote-udi.c: Improve docstring.

Fri Jun 25 11:16:31 1993  Fred Fish  (fnf@cygnus.com)

	* elfread.c (elf_symfile_read):  Call bfd_elf_find_section, not
	bfd_elf32_find_section, to track bfd changes.

Fri Jun 25 11:22:28 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/riscos.mh (REGEX{,1}, MUNCH_DEFINE, MH_CFLAGS): Define.
	* config/mips/xm-riscos.h: Define USG.

Thu Jun 24 14:52:45 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* main.c (filename_completer): Don't complete to files ending in ~.

	* NEWS: Mention filename completion and "info line" enhancements.

	* main.c (symbol_completion_function): On "info t foo", return NULL,
	don't error().

	* main.c (symbol_completion_function): Don't use readline word
	breaking.  Use new calling convention for c->completer and
	complete_on_cmdlist.
	* command.h (struct command): Change arguments; now the text passed
	to completer does not have any word breaking done.  New arg word.
	* symtab.{c,h} (make_symbol_completion_list): Do word breaking.  Take
	word argument.
	* {main.c,gdbcmd.h} ({filename,noop}_completer): Take word argument.
	* command.{c,h} (complete_on_cmdlist): Take word argument.

	* command.c (lookup_cmd_1): Doc fix.

Thu Jun 24 13:26:04 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	* Makefile.in (OP_INCLUDE): define.
	  (OPCODE_CFLAGS): use OP_INCLUDE.

	* config/i386/ncr3000.mh, config/i386/i386v4.mh,
	config/i386/i386sol2.mh, config/m68k/hp300hpux.mh,
	config/m68k/amix.mh, config/mips/irix[34].mh,
	config/m88k/delta88.mh, config/sparc/sun4sol2.mh (ALLOCA,
	ALLOCA1): macros removed.

	* config/mips/decstation.mh, config/rs6000/rs6000.mh
	(MMALLOC_LIB): renamed to MMALLOC.

Wed Jun 23 00:25:58 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* partial-stab.h: Consolidate case statements for N_LSYM and N_FUN.
	* dbxread.c: Change comment regarding acc.

Wed Jun 23 15:04:54 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	Makefile overhaul dropping autodepend features.
	* Makefile.in: many comment changes.  forced consistent use of $()
	  for makefile variables references.  dropped leading ./ in file
	  references.  Drop $(srcdir)/ prefix on all dependencies.
	  Inserted contents of alldeps.mak and depend.
	  (INCLUDE_CFLAGS): defined as new macro for getting libiberty's
	  include directory into the compilation line.
	  (GDB_CFLAGS): new macro to take up the semantic previously held
	  by INCLUDE_CFLAGS.
	  (LIBIBERTY): dropped ancient subdir macro.  I last removed this
	  macro in feb of '92.  How does it keep coming back?
	  (MMALLOC_LIB): renamed to MMALLOC.
	  (BFD_SRC_DIR): renamed to BFD_SRC.
	  (BFD_OBJ_DIR): renamed to BFD_DIR.
	  (BFD_LIB): renamed to BFD.
	  (BFD_INCLUDES): renamed to BFD_CFLAGS.
	  (READLINE_DIR): now represents object directory.
	  (RL_LIB): renamed to READLINE.
	  (READLINE_SRC, READLINE_CFLAGS, OPCODES, OPCODES_CFLAGS): new
	  macros.
	  (INTERNAL_CFLAGS): added GDB_CFLAGS, OPCODES_CFLAGS,
	  READLINE_CFLAGS, BFD_CFLAGS.  Dropped USER_CFLAGS.
	  (LDFLAGS): removed default assignment.
	  (TEXIDIR, INCLUDE_DEP, MMALLOC_DIR, MMALLOC_DEP, BFD_DEP,
	  READLINE_DEP, LIBIBERTY_DIR, TESTS, depend, STAGESTUFF): unused, so removed.
	  (ALLOCA1, ALLOCA): removed all references.  alloca is now in
	  libiberty.
	  (VERSION): unilaterally and arbitrarily bumped to 4.9.3.
	  (SFILES, NONSRC, HFILES, ALLDEPFILES, ALLPARAM, ALLCONFIG):
	  removed all $(srcdir) prefixes.
	  (getopt_h, ieee-float_h, bfd_h, wait_h, dis-asm_h): new macros
	  for potential dependencies.  commented out by default.
	  (readline_headers, udiheaders): convenient abbreviations.
	  (gdbcore_h, frame_h, symtab_h, gdbtypes_h, expression_h,
	  value_h, breakpoint_h, command_h, gdbcmd_h, defs_h, inferior_h):
	  new macros used for header file dependencies.
	  (install-info, clean-info): collapse into the info rule.
	  (install): now depends on all.
	  (install-only): new target for installing without depending on
	  all.
	  (uninstall): new target.
	  (config-check, config-check-hosts, config-check-targets): added
	  fixme comments.
	  (ch-exp.tab.c, m2-exp.tab.c): added artificial dependencies in
	  order to force parallel makes into keeping these rules separate.
	* configure.in: omit cat'ing depend file onto generated Makefile.
	* alldeps.mak, depend: removed.

	* inferior.h: remove redundant include of symtab.h which is
	included in value.h via breakpoint.h.

	* alloca.c: removed.  alloca is now in libiberty.

	* config/m88k/delta88.mh, config/ns32k/merlin.mh (M_UNINSTALL):
	new macro to undo what M_INSTALL does.

Wed Jun 23 00:25:58 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/ns32k/{merlin.mh,xm-merlin.h}: Be consistent about name
	of gdb-sh.

	* dbxread.c (copy_pending): Change name and function of begi argument
	to endi, since that is what the caller needs.

	* Makefile.in (TAGFILES): Don't include YYFILES.

	* Makefile.in (HFILES): Include monitor.h.

	* Makefile.in: Include text that used to be in alldeps.mak.
	Remove config/mips/{bigmips.mh,xm-bigmips} from it.
	* Makefile.in, configure.in: Remove all traces of alldeps.mak.

	* main.c (main): Print help message on stdout not stderr
	per standards.texi.
	New option --version per standards.texi.
	In help message, show long options with "--" not "-".
	Don't try to print help message or version until after we have
	called initialize_all_files.

Tue Jun 22 03:15:38 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* solib.c (solib_add_common_symbols): Don't call lookup_minimal_symbol.
	(solib_add): Call special_symbol_handling once, not once per library.

	* procfs.c (procfs_resume): Don't pass a SIGTSTP whose action
	is SIG_DFL.

	* procfs.c (procfs_resume): Skip the unnecessary PRSVADDR on all
	systems, not just Solaris.

	* stabsread.c: Include <ctype.h>.

Mon Jun 21 16:09:46 1993  Jim Kingdon  (kingdon@cygnus.com)

	* fork-child.c (fork_inferior): Quote exec_file so it can contain
	funky characters.

Mon Jun 21 16:56:47 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (INCLUDE_CFLAGS):  Add BFD_INCLUDES for now, since
	bfd.h is included by target.h, which most of gdb includes.
	* depend:  Hand remove BFD_INCLUDES from ${CC} lines, now that
	it's in INCLUDE_CFLAGS.

Mon Jun 21 16:09:46 1993  Jim Kingdon  (kingdon@cygnus.com)

	* config/i386/*aix*, i386aix-nat.c: New files.
	* configure.in: Use them.
	* alldeps.mak: List them.
	* coffread.c (decode_base_type): Deal with anonymous enum type.
	* i387-tdep.c (print_387_status_word): Add comment re "top".
	* i386-tdep.c [I386_AIX_TARGET] (i386_extract_return_value): New func.
	* dbxread.c: Use SEEK_SET and SEEK_CUR, not L_*.  Define them if and
	only if not defined by a header file.
	* mipsread.c: Don't define L_SET or L_INCR.

Mon Jun 21 15:10:07 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (BFD_INCLUDES):  Bfd.h is now back in bfd build dir.
	* depend:  Hand updated to match.

Sun Jun 20 13:11:11 1993  Jim Kingdon  (kingdon@cygnus.com)

	* stabsread.c (read_struct_fields): Don't call read_cpp_abbrev on $_.
	(read_cpp_abbrev): Don't complain specially for $_.  Also return 0 if
	we don't recognize the abbrev.

Sun Jun 20 00:24:41 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* solib.c (solib_add_common_symbols): Add comment about performance.

Fri Jun 18 12:37:36 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/{{x,n}m-riscos.h,riscos.mh}: New files.
	* configure.in (mips-*-sysv*): Use riscos for host, bigmips for target.

	* config/mips/{{x,n}m-news-mips.h,news-mips.mh}: New files.
	* config/mips/{bigmips.mh,xm-bigmips.h}: Remove.
	* configure.in (mips-sony-*): Use news-mips for host.

	* buildsym.h: Doc fix for processing_acc_compilation.

Thu Jun 17 19:57:08 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (print_formatted): Don't use tab in wrap_here arg.

Thu Jun 17 17:29:30 1993  Jim Kingdon  (kingdon@lisa.cygnus.com)

	* Makefile.in (INTERNAL_CFLAGS): Include ../include as well as
	${srcdir}/../include.

	* config/m88k/xm-delta88.h: Comment out unused defines which conflict
	with system headers.
	* printcmd.c (printf_command): Cast second arg to vprintf to PTR.
	Use VPRINTF macro if defined.
	* config/m88k/xm-delta88.h: Define VPRINTF.  Include <sys/siginfo.h>.
	Define TIOC{GETC,GLTC}_BROKEN.
	* m88k-nat.c: Uncomment include of <sys/ptrace.h>.
	* main.c: Rename initialize_{main,cmd_lists,history} to init_* to
	make things easier on munch (apparently this matters on
	the delta88 with svr3).

Thu Jun 17 16:53:56 1993  david d `zoo' zuhn (zoo@cygnus.com)
	
	* Makefile.in: canonicalize install.sh; for use within
	this directory (and subdirs)

Tue Jun 15 17:01:23 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* Makefile.in: remove parentdir support; use INSTALL_XFORM

Thu Jun 17 15:08:35 1993  Steve Chamberlain  (sac@phydeaux.cygnus.com)

	* configure.in (alpha-*-osf*), config/alpha/alpha-osf.mh: New
	host.
	* sh-tdep.c (frame_find_saved_regs): Use NUM_REGS rather than hard
	wired (and wrong) constant.
	* values.c (unpack_long): Add case to unpack when target object is
	sizeof(int).
	* config/sh/tm-sh.h (REGISTER_NAMES): Know about the news ones the
	simulator defines.

Wed Jun 16 16:08:18 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	* NEWS: tracking user visible changes starting with
	vxworks-timeout.

	* remote-vx.c (_initialize_vx): rename user settable option from
	rpcTimeout to vxworks-timeout.

Wed Jun 16 12:21:49 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (depend):  More makefile diddling.
	* alldeps.mak, depend:  Update to latest automatically built
	versions.

	* Makefile.in (depend):  Bfd.h keeps moving, keep up with it.
	* alldeps.mak, depend:  Update to latest automatically built
	versions.

Tue Jun 15 12:26:05 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	* remote-vx.c: include gdbcmd.h for setlist.
	  (_initialize_vx): make rpcTimeout user settable.

Mon Jun 14 09:23:51 1993  Jim Kingdon  (kingdon@cygnus.com)

	* main.c, gdbcmd.h: Add function filename_completer.
	* main.c, symfile.c, source.c, exec.c, core.c: Use it for
	"directory", "source", "cd", "symbol-file" "add-symbol-file",
	"load", "file", "exec-file", "core-file" commands.
	(But '/' is a word break, limiting usefulness; see comments).

	* source.c (mod_path): Warning not error if can't find directory.

	* isi-xdep.c: New file.
	* config/m68k/isi.mh (XDEPFILES): Add isi-xdep.o

Sun Jun 13 09:17:48 1993  Jim Kingdon  (kingdon@cygnus.com)

	* config/m68k/xm-news.h: Include <sys/param.h>.

	* m88k-tdep.c (IEEE_isNAN): Remove.
	config/m88k/tm-m88k.h (INVALID_FLOAT): Return 0.  This was the same
	broken isNAN as on the mips.

	* valprint.c (_initialize_valprint): Use c->function.sfunc not just
	c->function.

	* dbxread.c (process_one_symbol): If SUN_FIXED_LBRAC_BUG is not
	defined, don't worry about Sun's silly LBRAC bug.
	* config/m68k/tm-sun3.h: Define SUN_FIXED_LBRAC_BUG to 0.

	* dbxread.c (process_one_symbol): If there's a symbol before an
	N_SO, don't error().
	(case N_BCOMM): complain () not error ().

	* defs.h, main.c (catch_errors): Add return_mask arg.
	stack.c (print_frame_info): Pass RETURN_MASK_ERROR.
	other callers: Pass RETURN_MASK_ALL.
	(return_to_top_level), callers: Add return_reason arg.
	* utils.c (quit):
	Use return_to_top_level (RETURN_QUIT) instead of error ().
	* main.c (main), tm-nindy960.h (ADDITIONAL_OPTION_HANDLER):
	Use SET_TOP_LEVEL not setjmp (to_top_level).
	* remote-nindy.c: Use catch_errors not setjmp (to_top_level).

Sat Jun 12 14:40:54 1993  Jim Kingdon  (kingdon@cygnus.com)

	* solib.c (solib_create_inferior_hook) [SVR4_SHARED_LIBS]:
	Don't try to get the debug base yet.

	* dbxread.c (process_one_symbol): Set n_opt_found based on whether
	a non-gcc N_OPT symbol is found.  Make SUN_FIXED_LBRAC_BUG a macro
	which returns 0 or 1 to say whether to do it.
	* config/sparc/sun4{sol2,os4}.h
	(SUN_FIXED_LBRAC_BUG,VARIABLES_INSIDE_BLOCK): Use n_opt_found so
	the right thing happens for both acc and SunOS4 /bin/cc.

	* valprint.c (print_hex_chars): Use local_hex_format_{pre,suf}fix.
	* printcmd.c (print_scalar_formatted): Use val_print_type_code_int.

	* mips-tdep.c: Remove isa_NAN; it assumed sizeof(host int) == 4 and
	probably contained byte-order sins too.
	config/mips/tm-mips.h (INVALID_FLOAT): Define to 0 like most machines.
	The IEEE_FLOAT code in print_floating takes care of it.

Sat Jun 12 14:47:04 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (VERSION):  Bump to 4.9.2.
	* c-valprint.c (c_val_print):  For array of chars printed with
	string syntax, don't print the address of the array.  From
	bothner@cygnus.com.
	* c-exp.y (yylex): Recognize '.' as indicating a floating point
	number regardless of the radix.  From wilson@cygnus.com.
	* valprint.c (set_input_radix_1, set_output_radix_1):  New
	prototypes and functions that do the actual radix setting work.
	* valprint.c (set_radix, set_output_radix, set_input_radix):
	Rewrite to use set_input_radix_1 and set_output_radix_1.
	* valprint.c (initialize_valprint):  Enable commands to
	independently set and show input and output radices.
	* valprint.c (show_radix):  New prototype and function that
	handles separate input and output radices.

Fri Jun 11 18:39:38 1993  Ken Raeburn  (raeburn@cygnus.com)

	Patches from Jeff Law, law@cs.utah.edu:
	* hppa-pinsn.c: Now uses disassembler from opcode library,
	this contains only the stub function print_insn.

Fri Jun 11 15:19:59 1993  K. Richard Pixley  (rich@cygnus.com)

	* main.c (main): back to two periods for elipse.
	  (print_gdb_version): revised format for configuration info.

Fri Jun 11 10:24:35 1993  Fred Fish  (fnf@cygnus.com)

	* defs.h (INT_MAX):  Cast unsigned shift result to int.

Fri Jun 11 10:17:41 1993  Jim Kingdon  (kingdon@cygnus.com)

	* dbxread.c (process_one_symbol): Rather than having
	BLOCK_ADDRESS_FUNCTION_RELATIVE a macro, make it a variable which
	is true if we are doing stabs-in-elf, false otherwise.
	config/sparc/tm-sun4sol2.h: Don't define it.

Fri Jun 11 13:33:40 1993  Ian Lance Taylor  (ian@cygnus.com)

	* remote-mips.c (mips_send_packet): Don't print garbage character
	in debugging info.
	(mips_request): Don't check that remote pid is 0, because
	sometimes it isn't.
	(mips_fetch_registers): Pass a pointer to SWAP_TARGET_AND_HOST,
	not an integer.

Fri Jun 11 10:17:41 1993  Jim Kingdon  (kingdon@cygnus.com)

	* stack.c (print_frame_info): Use catch_errors around print_frame_args.

	* Makefile.in (install): Don't depend on gdb.

	* Rename remote-es1800.c to remote-es.c
	and remote-st2000.c to remote-st.c for 14-char filenames.
	config/m68k/{es1800,st2000}: Use the new names.

	* mips-tdep.c (isa_NAN): Don't return true on -0.

Fri Jun 11 10:24:35 1993  Fred Fish  (fnf@cygnus.com)

	* defs.h (INT_MAX):  Cast unsigned shift result to int.

Thu Jun 10 13:26:41 1993  Fred Fish  (fnf@cygnus.com)

	* elfread.c (elf_symtab_read):  Add bfd section address to bfd
	symbols, now that they are section relative.
	* solib.c (bfd_lookup_symbol):  Ditto.

Thu Jun 10 10:56:56 1993  Jim Kingdon  (kingdon@cygnus.com)

	* Makefile.in (depend): Add bfd -I's for paread.c and xcoffexec.c
	depend: Updated accordingly.

Wed Jun  9 16:08:44 1993  Jim Kingdon  (kingdon@cygnus.com)

	* Makefile.in (*.tab.c): Use mv for atomic update.

	* Makefile.in ({dist,real}clean): Also remove nm.h.
	(realclean): Also remove ${TESTS}, y.output, yacc.{acts,tmp}.
	(distclean): Don't rebuild *.tab.c or TAGS.

Wed Jun  9 12:56:58 1993  K. Richard Pixley  (rich@cygnus.com)

	* Makefile.in (version.c): add host and target names to version.c.
	* main.c (main): print three periods for the elipse.
	  (print_gdb_version): also print configuration.

	* udi/udiids.h, udi/udip2soc.c, udi/udiphcfg.h, udi/udiphunix.h,
	  udi/udiproc.h, udi/udipt29k.h, udi/udiptcfg.h, udi/udisoc.h,
	  udi/udr.c: Change AMD copyrights to FSF copyleft '93.

	* remote-eb.c (get_hex_regs, eb_fetch_registers), remote-adapt.c
	  (get_hex_regs, adapt_fetch_registers): cast args to
	  supply_register to avoid gcc warning.

	* config/a29k/a29k.mt (TDEPFILES): drop minimon support.  It
	  doesn't compile on solaris and is now obsolete.

	* config/sparc/sun4os4.mh (XM_CLIBS): remove -lresolv.  This
	  breaks stock sunos installations.

Wed Jun  9 06:14:33 1993  Jim Kingdon  (kingdon@cygnus.com)

	* m68k-stub.c: Add comment about frame cache.

	* target.h (target_store_registers): Doc fix re error handling.

	* findvar.c (write_register): Call SWAP_TARGET_AND_HOST regardless
	of register_valid[regno].

Tue Jun  8 14:42:10 1993  Jim Kingdon  (kingdon@rtl.cygnus.com)

	* symtab.h, dwarfread.c: Doc fix re dependencies.

Tue Jun  8 17:54:09 1993  Rob Savoye  (rob@rtl.cygnus.com)

	* serial.c (serial_close): If scb is NULL, don't try to close
	it. 
	* configure.in: Add support for rom68k and bug boot monitors.

Tue Jun  8 17:39:12 1993  Steve Chamberlain  (sac@phydeaux.cygnus.com)

	* coffread.c (init_stringtab): Fix bug where sizeof(long) != 4.
	* gdbcore.h, core.c (read_memory_unsigned_integer): New function.
	* findvar.c (read_register, write_register): Fix thinko where
	sizeof(host long) != sizeof(target int).
	* h8300-tdep.c: Use new read_memory_unsigned_integer call.
	* sh-tdep.c (_initialize_sh_tdep): Add memory_size command.

Tue Jun  8 14:42:10 1993  Jim Kingdon  (kingdon@rtl.cygnus.com)

	* Move config/m68k/tm-m68k.h (FRAME_FIND_SAVED_REGS) to
	m68k-tdep.c (m68k_find_saved_regs).  Don't duplicate code between
	68881 and non-68881 cases.  Check for a pair of movel instructions.

Tue Jun  8 14:52:55 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	First cut at sparc-vxworks targetting.
	* config/sparc/tm-vxsparc.h, config/sparc/vxsparc.mt: new files.
	* configure.in: sparc-vxworks gdb_target now vxsparc.

	* remote-eb.c, remote.c: symfile.h requires bfd.h so include it.

Tue Jun  8 14:42:10 1993  Jim Kingdon  (kingdon@rtl.cygnus.com)

	* config/m68k/xm-news.h: add "extern int errno".

Tue Jun  8 13:45:07 1993  K. Richard Pixley  (rich@sendai.cygnus.com)

	* remove-vx.c (vx_read_register, vx_write_register): collapse
	  ifdef I80960 else (assumes) m68k into parameterizable macros
	  VX_NUM_REGS and VX_SIZE_FPREGS.
	* config/m68k/tm-vx68.h, config/i960/tm-vx960.h (VX_NUM_REGS,
	  VX_SIZE_FPREGS): new definitions.

Tue Jun  8 11:08:29 1993  Jim Kingdon  (kingdon@cygnus.com)

	* symfile.{c,h} (generic_load): New function.
	remote{,-nindy,-eb,-mips}.c: Use it.

Mon Jun  7 20:07:30 1993  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in (depend):  More sed gubbish to deal with
	../bfd/bfd.h being generated during the build.
	* depend:  Re-done with corrected makefile.

Mon Jun  7 16:32:05 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (BFD_SRC_DIR):  Renamed def and usages from BFD_DIR.
	* Makefile.in (BFD_OBJ_DIR):  New definition for the bfd build
	directory to find automatically generated header files and library.
	* Makefile.in (BFD_LIB):  Use BFD_OBJ_DIR.
	* Makefile.in (LINTFLAGS):  Include BFD_OBJ_DIR.
	* Makefile.in (saber_gdb):  Include BFD_OBJ_DIR.
	* Makefile.in (depend):  Include BFD_OBJ_DIR in gcc args.
	* Makefile.in (paread.o, xcoffexec.o):  Remove, now in depend.
	* depend, alldeps.mak:  Rebuild after Makefile.in changes.

Fri Jun  4 10:18:51 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* configure.in: change lynx support to CPU-*-lynxos*

	* Makefile.in (subdir_do): change test from existence of directory
	to existence of Makefile (the directory may exist but not be configured)

Thu Jun  3 01:18:51 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* config/sparc/xm-sun4sol2.h: define MEM_FNS_DECLARED

Fri Jun  4 10:43:33 1993  Ian Lance Taylor  (ian@cygnus.com)

	* configure.in (mips-idt-ecoffl*): New target; use idtl.
	(mips-idt-ecoff*): Added trailing '*'.
	* config/mips/idtl.mt: New file; like idt.mt, but little endian.

Thu Jun  3 17:36:56 1993  Stu Grossman  (grossman@cygnus.com)

	* ser-go32.c:  Clean up lots of compilation nits.

Thu Jun  3 14:44:57 1993  Stu Grossman  (grossman@cygnus.com)

	* Patches from Jeffrey Law <law@cs.utah.edu>.
	* hppab-nat.c: Eliminate unnecessary ifdefs for
	FETCH_INFERIOR_REGISTERS, CANNOT_FETCH_REGISTER, and
	CANNOT_STORE_REGISTER.
	(fetch_register): Delete code to handle CANNOT_FETCH_REGISTER.
	* hppa-pinsn.c: Support 'I', 'J', and 'K' in output
	templates for 1.1 FP computational instructions.

Thu Jun  3 03:34:49 1993  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in:  Remove ser-tcp.[co].  (Use XDEPFILES instead.)
	* alldeps.mak, depend:  Rebuild to account for ser-tcp.
	* config/sparc/sun4os4.mh:  Add ser-tcp to XDEPFILES.
	* gdbserver/Makefile.in (gdbserver):  Use -lbsd.
	* gdbserver/remote-inflow{-sparc}.c (create_inferior):  Don't use a
	shell when running the child, as args have been expanded by the
	time we get here.  Simplify calling convention.
	* gdbserver/remote-server.c (main):  Use new calling convention
	for create_inferior, remove defunct code for coalescing argv.
	Remove extra calls to mywait(), as we no longer have to wade
	through a shell.

	* target.c (target_read_memory_partial):  Don't deref errnoptr
	when checking for null pointer.

Wed Jun  2 19:58:46 1993  John Gilmore  (gnu@cygnus.com)

	* remote-es1800.c:  Fix typo.

Tue Jun  1 21:22:39 1993  Fred Fish  (fnf@cygnus.com)

	* target.c (target_read_memory_partial):  Like target_read_memory,
	but does partial reads, such as reads that bump into the end of
	the address space.
	* target.h (target_read_memory_partial):  Add prototype.
	* valprint.c (PRINT_MAX_DEFAULT):  New define, initial value 200.
	* valprint.c (val_print_string):  Complete rewrite to fix bug with
	bumping into end of memory, avoiding unnecessarily long reads, and
	fixing bug when print_max is set to 0 (unlimited print length).
	* valprint.c (_initialize_valprint):  Use PRINT_MAX_DEFAULT to
	initialize print_max.

Tue Jun  1 18:11:35 1993  Rob Savoye  (rob at darkstar.cygnus.com)

	* configure.in: Add support for rom68k and bug boot monitors.

Mon May 31 10:37:04 1993  Jim Kingdon  (kingdon@cygnus.com)

	* printcmd.c (print_scalar_formatted): Print integers bigger than
	LONGEST in hex no matter how big, and no matter what the format
	and size.

	* stabsread.c (read_type): Skip type attributes if present.

	* stabsread.c (read_huge_number): Don't accept '0' + radix as part
	of number, just through '0' + radix - 1.

Sun May 30 15:35:21 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (SER_HARDWIRE):  Temporarily comment out ser-tcp.o.

	* {dbxread.c, dwarfread.c} (read_ofile_symtab):  Rewrite to take
	single parameter, the pointer to the partial symtab, rather than
	a bunch of args that are derived from the partial symtab.  Change
	prototypes and callers to match.

	* dbxread.c (read_ofile_symtab):  Remove "#if 1" around code to
	set demangling style automatically.
	* defs.h (CPLUS_MARKER):  Clarify comment that this is only for
	GNU C++, not C++ in general.
	* symtab.h (general_symbol_info):  Simplify by eliminating one
	structure level for the language dependent info.

Sat May 29 15:59:29 1993  Fred Fish  (fnf@cygnus.com)

	* c-typeprint.c (c_type_print_base):  Avoid dereferencing NULL
	names for TYPE_CODE_STRUCT and TYPE_CODE_UNION types.
	TYPE_CODE_ENUM was already testing for this.

Fri May 28 17:18:05 1993  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in:  Add new file ser-tcp.c.
	* defs.h (memcmp):  Add decl for memcmp to #ifndef MEM_FNS_DECLARED.
	* findvar.c (write_register):  See if we are writing back the same
	value that's already in the register.  If so, don't bother.
	* remote.c (putpkt, getpkt):  Improve handling of communication
	problems.
	* ser-go32.c:  Prototype it to death.  Update serial_ops and add
	dummy routines where appropriate.
	* ser-tcp.c:  New module to implement serial I/O via TCP
	connections.
	* ser-unix.c:  Clean up getting/setting of tty state.  Get rid of
	SERIAL_RESTORE, add SERIAL_{GET|SET}_TTY_STATE interfaces.
	* serial.c:  Add start of support for connect command.
	(serial_open):  Distinguish between tcp and local devices.
	* serial.h (struct serial_ops):  Get rid of restore, add
	get_tty_state and set_tty_state.  Define protoypes and macros for
	this mess.
	* gdbserver/remote-utils.c:  Add tcp support.  (readchar):  Do
	some real buffering.  Handle error conditions gracefully.
	* gdbserver/remote-inflow-sparc.c:  Update to remote-inflow.c
	(Lynx), remove lots of cruft.

Fri May 28 17:24:51 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* printcmd.c (print_address_symbolic): turn this into an assigment
	instead of an initialization (many compilers don't accept
	structure initialization). 

Thu May 27 16:56:25 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (read_xcoff_symtab): If several program csects in one
	source file, give them all the name of the source file, rather than
	the 2nd and subsequent ones having NULL names.

Thu May 27 06:16:56 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* printcmd.c (print_address_symbolic):  Append source filename and
	linenumber of the symbol if print symbol-filename is on.
	(initialize_printcmd):  `set print symbol-filename'.

Wed May 26 13:46:16 1993  Stu Grossman  (grossman@cygnus.com)

	* configure.in:  Add config for Lynx target.  Configure gdbserver
	only for Lynx.  Re-do selective configuration of sparclite.

	* gdbserver/{remote-gutils.c remote-server.c Makefile.in
	configure.in remote-inflow.c remote-utils.c}:  New files to
	support GDB remote server.  Currently only works for Lynx.

Wed May 26 10:28:14 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (define_symbol, case 't'): Only set the name if it
	is not a pointer type.

	* stabsread.c (define_symbol): Clean up logic; move the read_type
	calls to inside the switch statement (this improves the error
	handling).

	* mipsread.c (parse_symbol, parse_partial_symbols): Deal with Fortran
	common blocks.

Tue May 25 20:44:24 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (print_formatted, case 'i'): Pass a tab to wrap_here.

	* source.c (line_info): Change "pc" to "address" in messages and
	use print_address for addresses.

	* source.c (line_info): If we don't find a symtab, print more useful
	output, including the symbolic address.

	* source.c (line_info): If --fullname, display the source.
	(identify_source_line), callers: Take pc as argument, rather than
	assuming innermost frame (emacs doesn't use this, so no one ever
	noticed).
	* symtab.h: Declare frame_file_full_name.
	* main.c: Don't.

Tue May 25 15:30:43 1993  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* breakpoint.c (catch_command_1): Fix typo in error msg.

Tue May 25 16:05:55 1993  Ken Raeburn  (raeburn@cambridge.cygnus.com)

	* elfread.c (elf_symfile_read): Update ELF structure and routine
	names to specify 32-bit versions.
	(elf_symtab_read): Retrieve size field directly from symbol,
	instead of using old kludge.

	* mips-pinsn.c (print_insn): Cast address to bfd_vma before
	calling opcodes library.
	* z8k-tdep.c (print_insn): Likewise.

Tue May 25 13:06:28 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c: Remove all uses of error().  Make error_type and
	read_type_number static.
	(define_symbol): Don't try to deal with a missing symbol
	descriptor which isn't followed by digit, '(', or '-'.
	* stabsread.h: Don't declare read_type_number here.
	* gdbtypes.h: Don't declare error_type here.
	* xcoffread.c: Remove NO_TYPEDEFS code.

Tue May 25 09:33:16 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mips-tdep.c: Removed #include of many header files, and #define
	of MIPSMAGIC; no longer used.

Tue May 25 09:36:13 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Many places: replace "the inferior" in messages with "the program"
	or "the program being debugged".
	* inflow.c (try_writing_regs): Remove; it's been #if 0'd forever
	and I'm getting sick of maintaining it.

	* config/i386/linux.mh: Don't use \ newline; the awk scripts don't
	support it.

	* config/i386/go32.mh: Define SER_HARDWIRE.
	* Makefile.in: Define SER_HARDWIRE.
	(DEPFILES): Use it.
	(alldeps.mak): Add SER_HARDWIRE.
	Remove all references to ser-hardwire.{c,o}.
	* configure.in: Remove all ser_hardwire and gdb_serial_driver stuff.

Mon May 24 23:50:05 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* sparc-nat.c (store_inferior_registers):  Fill in all members of
	inferior_fp_registers by reading them from the inferior before
	modifying and writing them back.
	Fixes unexplainable inferior FP exceptions after calls to the inferior
	or setting of floating point registers.
	* mips-tdep.c (mips_skip_prologue):  Skip move of argument register
	to register which is generated by gcc-2.4.

Tue May 25 00:42:39 1993  Ken Raeburn  (raeburn@cygnus.com)

	* hppa-pinsn.c: Define OLD_TABLE before including opcode/hppa.h.

Mon May 24 13:55:14 1993  Stu Grossman  (grossman@cygnus.com)

	* config/i386/{i386lynx.mh i386lynx.mt nm-i386lynx.h tm-i386lynx.h
	xm-i386lynx.h}:  New configuration for Lynx.

Mon May 24 10:01:10 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* mipsread.c (parse_symbol): Deal with scVar and scVarRegister.
	* symtab.h: Comment that LOC_REGPARM_ADDR can be call by reference.

	* c-typeprint.c (c_type_print_base): Don't print typedef'd names
	as struct, union, or enum tags.

Mon May 24 01:10:01 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* symmisc.c (dump_msymbols): Avoid gdb coredump with stripped
	executable.

Sat May 22 10:03:09 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c (wait_for_inferior),
	infcmd.c (program_info, signal_command):  Use symbolic signal names.

	* inftarg.c (child_wait): Deal with EINTR and include message from
	strerror if printing an error message.

	* main.c (command_line_input): Use STOP_SIGNAL not SIGTSTP.

	* stabsread.c: Remove most uses of lookup_fundamental_type.
	(define_symbol): Use read_type for type of enum constant,
	not just read_type_number.  Also don't call error().
	(define_symbol): For unrecognized constant type, one complaint (the
	one from error_type) is	enough.  Don't make our own in addition.
	(define_symbol): Don't treat an N_FUN 'R' as a prototype.
	* gdbtypes.h: Doc fixes.

Sat May 22 03:33:07 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	Fix stack unwinding through _sigtramp on Irix. These patches are from
	Paul Flinders <ptf@delcam.co.uk>.
	* mipsread.c (fixup_sigtramp): Find _sigtramp on Irix even when the
	executable uses sigvec.
	* mips-tdep.c (read_next_frame_reg): Allow tm-file to override
	sigcontext offsets.
	* config/mips/tm-irix3.h: Add sigcontext offsets for Irix.

Sat May 22 00:39:01 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (wait_for_inferior): Clear stop_signal if it should not
	be passed to the inferior to make "handle <signal> nopass nostop" work.

Sat May 22 00:21:41 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/mips/tm-irix3.h: Clean up, use tm-bigmips.h and redefine
	the necessary bits.
	* findvar.c (value_from_register): Fix uninitialized first_addr
	which caused problems with assignment of doubles to register variables
	on some targets.
	* mipsread.c: Remove TM_FILE_OVERRIDE, include tm.h and provide the
	missing mips definitions if necessary.

	Fix handling of double register variables for mips targets and big
	endian hosts. These patches are from Paul Flinders <ptf@delcam.co.uk>.
	* config/mips/tm-mips.h: Increase MAX_REGISTER_{RAW,VIRTUAL}_SIZE to
	  8 bytes for doubles.
	* config/mips/tm-mips.h (REGISTER_CONVERT_TO_TYPE): New macro for
	  conversion of type held in multiple registers to host format.
	* config/mips/tm-mips.h (REGISTER_CONVERT_FROM_TYPE): New macro,
	  companion to REGISTER_CONVERT_TO_TYPE.
	* config/mips/tm-mips.h (EXTRACT_RETURN_VALUE, STORE_RETURN_VALUE):
	  Convert to function calls.
	* config/mips/tm-mips.h (FIX_CALL_DUMMY): New code for big endian
	  mips targets.
	* mips-tdep.c (mips_print_register): Raw buffer now needs just
	  MAX_REGISTER_RAW_SIZE bytes.
	* mips-tdep.c (mips_print_register): Use REGISTER_CONVERT_TO_TYPE
	  (if defined) for doubles.
	* mips-tdep.c: (mips_extract_return_value, mips_store_return_value):
	  New functions, take care of REGISTER_CONVERT_TO/FROM_TYPE.
	* valops.c (value_assign): Use REGISTER_CONVERT_TO_TYPE if
	  defined.
	* findvar.c (value_from_register): Use REGISTER_CONVERT_TO_TYPE if
	  defined.

Fri May 21 09:04:25 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* configure.in: Add i[34]86-*-isc*.

	* stabsread.c: Make sure all complain() pass the address of the struct.

	* xcoffread.c: Make sure all struct complaints are static not auto.

	* Makefile.in: Add rule for xcoffexec.o like that for paread.o.

	* xcoffread.c (process_xcoff_symbol, case C_LSYM): Use define_symbol.

Wed May 19 12:33:59 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/i386/linux.mh: Re-enable coredumps now that they should work.

Wed May 19 15:44:20 1993  K. Richard Pixley  (rich@cygnus.com)

	* config/m68k/tm-m68k.h (FRAME_CHAIN): add missing close paren.

Wed May 19 15:33:57 1993  Stu Grossman  (grossman@cygnus.com)

	* config/pa/nm-hppab.h:  Comment PTRACE_ARG3_TYPE.

Wed May 19 12:33:59 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (INSTALLED_LIBS): New variable.

Tue May 18 14:08:50 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* main.c (quit_command): In the "quit anyway?" message, tell the user
	whether we are planning to detach or kill the program.

	* config/vax/vaxbsd.mh: Add "NAT_FILE= nm-vax.h".
	* config/vax/xm-vaxbsd.h: Use <sys/param.h> not <machine/limits.h>

	* infcmd.c (read_pc): Doc fix.

	* printcmd.c (print_address_symbolic): Use %u not %d for offset.

	* blockframe.c (get_prev_frame_info): If pc in sigtramp, set
	signal_handler_caller.
	* tm-68k.h (FRAME_{CHAIN,SAVED_PC}): Deal with sigtramp.
	* tm-hp300bsd.h: Define SIGTRAMP_{START,END} not IN_SIGTRAMP.
	* inferior.h (IN_SIGTRAMP): Definition moved from infrun.c.
	Use SIGTRAMP_START if defined.
	* infcmd.c (step_1): Use SIGTRAMP_{START,END} if needed.
	* infrun.c (wait_for_inferior): Check IN_SIGTRAMP before SKIP_PROLOGUE.

	* infptrace.c: Remove unused KERNEL_U_ADDR_HPUX code.

	* infcmd.c (step_1): Fix poorly worded error message.

	* config/{i386/linux.mh,m68k/isi.mh} (NATDEPFILES):
	Comment out corelow.c because core dumps are broken on these machines.

	* Makefile.in (depend):  Put "${srcdir}" in generated dependencies
	if srcdir is not ".".
	Also put in -I${BFD_DIR} or -I${READLINE_DIR} for files which need it.
	(INCLUDE_CFLAGS):  Remove BFD_DIR and READLINE_DIR.
	* depend:  Update to latest automatically built version.

Tue May 18 08:10:45 1993  Fred Fish  (fnf@cygnus.com)

	* ChangeLog, ChangeLog-92:  Split ChangeLog at 1993.
	* Makefile.in (NONSRC):  Add ChangeLog-92

Tue May 18 08:03:37 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* findvar.c ({read,write}_register): Use REGISTER_RAW_SIZE
	not typo RAW_REGISTER_SIZE.

	* frame.h, inferior.h: Doc fixes.

Mon May 17 15:43:03 1993  Stu Grossman  (grossman@cygnus.com)

	* findvar.c (write_register):  Add sanity check for register size.
	(read_register):  Fixup sanity check for register size to be
	consistent with write_register().

Mon May 17 07:36:20 1993  Ian Lance Taylor  (ian@cygnus.com)

	* sparclite/Makefile.in: Add dummy info, install and install-info
	targets.

Thu May 13 07:30:22 1993  Ian Lance Taylor  (ian@cygnus.com)

	* remote-nindy.c: Removed declaration of coffstrip.
	* nindy-share/nindy.c: #if 0 coffstrip routine; no longer used.

Wed May 12 00:35:19 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (VERSION):  Bump to 4.9.1 after release and cvs
	tagging.

	* Makefile.in (VERSION):  GDB 4.9 release.

Tue May 11 08:04:41 1993  Fred Fish  (fnf@cygnus.com)

	* README:  Update known bugs to include the Solaris bug that
	leaves core dumps in the current directory when restarting the
	inferior with "run".  Expand on the testsuite information.

	* Makefile.in (VERSION):  Bump to 4.8.96 for what should hopefully
	be the last 4.9 prerelease test archive.

Mon May 10 22:13:23 1993  Jim Kingdon  (kingdon@cygnus.com)

	* config/m68k/xm-hp300bsd.h: Include <sys/param.h> to avoid INT_MAX
	redefined warnings.

Mon May 10 20:00:43 1993  Fred Fish  (fnf@cygnus.com)

	* README, NEWS:  Update for gdb 4.9 release.

Mon May 10 19:38:34 1993  John Gilmore  (gnu@cygnus.com)

	* ch-exp.y (MAX, MIN):  Rename to MAX_TOKEN, MIN_TOKEN.
	* target.c (MIN):  #undef before defining.

Mon May 10 16:03:03 1993  Jim Kingdon  (kingdon@cygnus.com)

        Patch from Jeffrey Law:
        * gdb/config/pa/nm-hppab.h (PTRACE_ARG3_TYPE): Define as caddr_t.

Mon May 10 15:28:27 1993  Ian Lance Taylor  (ian@cygnus.com)

	* hppa-tdep.c (hppa_push_arguments): Allocate correct amount of
	memory.

Mon May 10 13:14:46 1993  Fred Fish  (fnf@cygnus.com)

	* ch-exp.y (start):  Apply work-around to avoid bison warning.

Sun May  9 07:25:02 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (BISON):  Remove double quotes around BISON
	definition when bison is used.

	* configure.in (hppa*-hp-bsd):  Change to hppa*-hp-bsd*
	* configure.in (hppa*-hp-hpux):  Change to hppa*-hp-hpux*
	* configure.in (m68*-hp-bsd):  Change to m68*-hp-bsd*
	* configure.in (m68*-hp-hpux):  Change to m68*-hp-hpux*
	* configure.in (hppa*-*-bsd):  Change to hppa*-*-bsd*
	* configure.in (hppa*-*-hpux):  Change to hppa*-*-hpux*
	* configure.in (m68*-hp-bsd):  Change to m68*-hp-bsd*
	* configure.in (m68*-hp-hpux):  Change to m68*-hp-hpux*

	* Makefile.in (VERSION):  Bump to 4.8.6.

Sat May  8 12:36:03 1993  Fred Fish  (fnf@cygnus.com)

	* config/pa/xm-hppah.h (MALLOC_INCOMPATIBLE):  Define it, and
	include declarations for malloc/realloc/free.  Both malloc and
	realloc return 'void *' for non-ANSI compilations.

Sat May  8 01:39:30 1993  (pes@regent.e-technik.tu-muenchen.de)

	* coffread.c (read_coff_symtab): Don't fclose stream as it is no
	longer opened twice.

Thu May  6 21:08:55 1993  Jim Kingdon  (kingdon@cygnus.com)

	* solib.c (clear_solib): Don't close bfd if it is NULL.

Thu May  6 20:55:35 1993  Fred Fish  (fnf@cygnus.com)

	* core.c (dis_asm_read_memory):  Cast second arg of
	target_read_memory to "char *".
	* breakpoint.c (watchpoint_check):  Change arg type from PTR to
	"char *", to match other functions called by catch_errors().

Thu May  6 15:47:45 1993  Stu Grossman  (grossman@cygnus.com)

	* More patches from Jeffrey Law (law@cs.utah.edu).
	* gdb/config/nm-hppab.h (PTRACE_ARG3_TYPE): Define as caddr_t.
	* gdb/config/pa/tm-hppah.h (millicode_start, millicode_end):
	Delete unnecessary declarations.

Thu May  6 15:15:46 1993  Stu Grossman  (grossman@cygnus.com)

	* ser-unix.c (wait_for):  Use VTIME to do timeouts instead of
	poll() for termio{s}.

Thu May  6 10:03:41 1993  Jim Kingdon  (kingdon@cygnus.com)

	* i386-tdep.c (i386_frame_num_args): Always return -1.

Wed May  5 15:16:33 1993  Stu Grossman  (grossman@cygnus.com)

        * Patches from Jeffrey Law <law@cs.utah.edu>.
	* gdb/hppa-tdep.c: Declare frame_saved_pc.
	(frameless_function_invocation): New function.
	(frame_saved_pc, init_extra_frame_info): Use 
	frameless_function_invocation.
	* gdb/config/pa/tm-hppa.h (SAVED_PC_AFTER_CALL): Use saved_pc_after
	call instead of just grabbing the value currently in %r2.
	(FRAMELESS_FUNCTION_INVOCATION): Use frameless_function_invocation.
	* gdb/config/pa/tm-hppah.h (SAVED_PC_AFTER_CALL): Delete private
	definition and use the common one in tm-hppa.h.
	* gdb/hppa-tdep.c (frame_chain_valid): If "use_unwind" is true, then
	use unwind descriptors to determine if the frame chain is valid.
	* gdb/hppa-tdep.c (find_dummy_frame_regs):  Rework so that
	it does not assume %r4 is the frame pointer.
	* gdb/hppa-pinsn.c (print_insn): Handle 'r' and 'R' for break, rsm,
	and ssm instructions.
	* gdb/hppa-tdep.c (extract_5r_store, extract_5R_store): New
	helper functions for print_insn.
	* gdb/hppa-tdep.c (gcc_p, hpux_cc_p): Delete unused functions.
	* gdb/config/pa/tm-hppa.h (ABOUT_TO_RETURN): Handle a return
	which nullifies the following instruction.

Tue May  4 12:11:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* infptrace.c [FIVE_ARG_PTRACE]: Define ptrace to call_ptrace and
	pass the 5th arg there, rather than using an ANSI C-specific macro.

	* Makefile.in (depend): Don't include ${CC} command for *.tab.c.

Tue May  4 19:33:12 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (VERSION):  Bump to 4.8.5
	* Makefile.in (INCLUDE_CFLAGS):  Add BFD_DIR and READLINE_DIR
	directories to include search path.
	* Makefile.in (CLIBS, CDEPS, ADD_FILES, ADD_DEPS):  Clean up
	whitespace.
	* Makefile.in (depend):  For gcc -MM line, use INTERNAL_CFLAGS
	* Makefile.in (main.o, dbxread.o, coffread.o, mipsread.o,
	elfread.o, dwarfread.o, stabsread.o, xcoffread.o, xcoffexec.o,
	xdr_ld.o, xdr_rdb.o, nindy.o, Onindy.o, ttybreak.o, ttyflush.o,
	udr.o, udip2soc.o):  Remove explicit rules, use the ones that
	are automatically generated in "depend".
	* Makefile.in (paread.o):  Document why a dependency doesn't get
	automatically generated in "depend" and leave this explicit rule
	in for now (FIXME).
	* depend:  Update to latest automatically generated version.

Tue May  4 12:11:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c: Doc fix.

	* Makefile.in (depend): Include $(CC) command in generated output.

Mon May  3 22:51:05 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (NONSRC):  Remove ${srcdir}/putenv.c.
	* Makefile.in (SFILES):  Add ${srcdir}/putenv.c.
	* depend:  Update to latest automatically built version.

Mon May  3 19:20:20 1993  Stu Grossman  (grossman@cygnus.com)

	* sparclite/Makefile.in:  Create default target that does nothing
	in order to force user to build by hand.

	* sparclite/Makefile:  Remove.  It's not necessary anymore.

	* ser-unix.c (wait_for):  New routine to handle read timeouts,
	etc.  Uses poll() if HAVE_TERMIO[S] is defined, select() otherwise.

Mon May  3 13:52:08 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mips-pinsn.c (print_insn): Return value.

Sun May  2 11:43:57 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (SFILES):  Remove ser-hardwire.c; it is a link made
	at configuration time and doesn't belong in the distribution archive.

	* Makefile.in (NONSRC):  Add 29k-share/README.
	* Makefile.in (HFILES):  Add 29k-share/udi/udiids.h.

	* defs.h (UINT_MAX, LONG_MAX, INT_MAX, INT_MIN):  Replace hex
	constants with slightly more portable definitions (still depends
	on 2's complement arithmetic though).
	* config/i386/nm-linux.h:  Define NO_SYS_REG_H for no <sys/reg.h>.
	* i386v-nat.c (sys/reg.h):  Conditionalize include on
	NO_SYS_REG_H.  Linux doesn't have <sys/reg.h>.
	* ser-unix.c (termio.h):  Include <termio.h> like other files that
	include termio.h, not <sys/termio.h> which may not exist (on
	linux for example).

Sat May  1 16:05:24 1993  Fred Fish  (fnf@cygnus.com)

	* valprint.c (print_longest):  Change format parameter from a
	'char' to an 'int'.  We can't have 'char' parameters with the
	current coding style, where we mix prototypes with pre-ANSI
	style declarations.
	* value.h (print_longest):  Change format parameter in prototype
	from a 'char' to an 'int'.	

Sat May  1 02:47:20 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/mips/tm-mips.h (STAB_REG_TO_REGNUM): Match it with the gcc
	definition.
	* config/mips/tm-irix3.h (STAB_REG_TO_REGNUM): Add.
	* irix4-nat.c (fill_fpregset): Fix bug with indexing into fpregsetp.

Fri Apr 30 17:45:32 1993  Stu Grossman  (grossman@cygnus.com)

        * The following patches are from Jeffrey Law <law@cs.utah.edu>.
	* config/pa/hppabsd.mh:  Add more files to NATDEPFILES.
	* config/pa/xm-hppa[bh].h: Define FIVE_ARG_PTRACE.
	* hppab-nat.c: Delete WANT_NATIVE_TARGET ifdefs.
	ptrace needs 5 arguments, #define ptrace to always
	pass zero as the 5th argument.

Fri Apr 30 15:54:13 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* configure.in: Match z8k-*-sim for z8000.
	* config/h8500/tm-h8500.h, h8500-tdep.c: Lint.
	* remote-hms.c: Update to use new serial protocol.

Fri Apr 30 16:50:38 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* mips-tdep.c: remove include of sys/dir.h.  Doesn't seem
	  necessary and Solaris doesn't have it.

	* Makefile.in (clean-info, install, install-info, info, dvi,
	  check, all): do not echo recursion lines.

	* 29k-share/udip2soc.c (UDIConnect): replace union wait with int.

	* config/sparc/sun4sol2.mh (XM_CLIBS): add -lsocket which is
	  required target ports which use sockets (like a29k-udi).

	* remote-udi.c (udi_wait): Use SIGURG, as Solaris doesn't have SIGLOST.

Fri Apr 30 11:05:42 1993  Jim Kingdon  (kingdon@cygnus.com)

	* ser-unix.c [USE_{TERMIO,ALARM}_TIMEOUT]: New code to deal with
	systems lacking select().

	* Makefile.in (TAGS): Doc fix.  Deal with empty DEPFILES.

Fri Apr 30 10:06:46 1993  Fred Fish  (fnf@cygnus.com)

	* alldeps.mak, depend:  Update with latest automatically built
	versions.

Thu Apr 29 12:03:23 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (SFILES):  Add ser-unix.c and ser-go32.c.

	* Makefile.in (make-proto-testsuite.dir):  New target to make
	prototype testsuite tree.

	* Makefile.in (VERSION):  Bump to 4.8.4.

Thu Apr 29 08:46:22 1993  Jim Kingdon  (kingdon@cygnus.com)

	* stabsread.c (define_symbol): If unrecognized constant type,
	complain() not error().

Thu Apr 29 00:03:59 1993  Fred Fish  (fnf@cygnus.com)

	* infptrace.c:  Add missing close paren to test for
	FIVE_ARG_PTRACE defined.

	* defs.h (CC_HAS_LONG_LONG):  Set up to define CC_HAS_LONG_LONG
	when compiling with gcc, but disable it for now.  See comment.
	* defs.h (LONGEST):  Define as either "long" or "long long"
	based on CC_HAS_LONG_LONG.
	* defs.h (longest_to_int):  Use CC_HAS_LONG_LONG to control
	how longest_to_int is defined.
	* c-valprint.c (c_val_print):  Call print_longest.
	* expprint.c (dump_expression):  Use PRINTF_HAS_LONG_LONG
	instead of LONG_LONG.
	* {printcmd.c, gdbtypes.h} (LONG_LONG):  Replace usages with
	CC_HAS_LONG_LONG.
	* printcmd.c (print_scalar_formatted):  Call print_longest
	and let it figure out what to do for PRINTF_HAS_LONG_LONG.
	* typeprint.c (print_type_scalar):  Call print_longest and let
	it figure out what to do for PRINTF_HAS_LONG_LONG.
	* valprint.c (val_print_type_code_int):  Call print_longest
	and let it figure out what to do for PRINTF_HAS_LONG_LONG.
	* stabsread.c (LONG_LONG):  Replace usages with CC_HAS_LONG_LONG.
	* value.h (struct value):  Replace usage of LONG_LONG with
	CC_HAS_LONG_LONG.
	* value.h (print_longest):  Add prototype.
	* values.c (LONG_LONG):  Replace usages with CC_HAS_LONG_LONG.
	* values.c (unpack_double):  Collapse code that was unnecessarily
	dependent on CC_HAS_LONG_LONG.  Use LONGEST instead of direct types.
	* values.c (value_from_longest):  Remove dependency on
	CC_HAS_LONG_LONG and just use LONGEST.
	* solib.c (solib_map_sections):  Use bfd_get_filename
	to access filename field.
	* solib.c (clear_solib):  Save filename and free it later, after
	bfd_close, since bfd_close may reference it.  Use bfd_get_filename
	to access the field.
	* config/convex/xm-convex.h (LONG_LONG):  Replace with
	CC_HAS_LONG_LONG.  Add define for PRINTF_HAS_LONG_LONG.
	* doc/gdbint.texinfo (LONG_LONG):  Replace with CC_HAS_LONG_LONG.
	Add PRINTF_HAS_LONG_LONG references.

Wed Apr 28 06:11:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* inflow.c (kill_command), infcmd.c (attach_command),
	remote.c (remote_interrupt_twice): In messages for the user, call it
	"the program" or "the program being debugged" not "the inferior".

	* hp300ux-nat.c: Cast second arg to supply_register calls.
	(_initialize_kernel_u_addr, getpagesize): New functions.
	(store_inferior_register_1): Change arg name from value to val.
	(fetch_core_registers): Make arg core_reg_size unsigned.
	Pass 5 args to ptrace.
	* config/m68k/xm-hp300hpux.h: Define FIVE_ARG_PTRACE.
	Remove KERNEL_U_ADDR stuff.
	* infptrace.c [FIVE_ARG_PTRACE]: Pass 5th arg to ptrace.
	* config/m68k/hp300hpux.m{t,h}:
	Move exec.o from NATDEPFILES to TDEPFILES
	* config/m68k/hp300hpux.mt: Mention GAS requirement.  Remove
	hp-include stuff.  Add m68k-tdep.o to TDEPFILES.

Wed Apr 28 13:27:54 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* ch-exp.y (yylex): Don't STREQ with simplename if it is NULL.

Wed Apr 28 06:11:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* config/sparc/xm-sun4os4.h [__STDC__]: Don't use MALLOC_INCOMPATIBLE.

Wed Apr 28 11:39:18 1993  Roland H. Pesch  (pesch@fowanton.cygnus.com)

	* doc/gdb.texinfo: make node "Shell Commands" unconditional;
	describe `set demangle-style arm' (not cfront); 
	mention can type `q' to discard output, when gdb pages

Wed Apr 28 11:32:39 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* valops.c (search_struct_field): Fix gdb core dump with incomplete
	stabs info.

Wed Apr 28 06:11:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* remote.c: Change timeout to 2.
	(remote_open): Use unpush_target not remote_close.
	(remote_resume): If siggnal != 0, give warning not error().
	(remote_wait, remote_interrupt, remote_interrupt_twice):
	If we get two interrupts, let the user get out if they want.
	(remote_{kill,mourn}): New functions.
	i386-stub.c (handle_exception, case 'k'): Don't BREAKPOINT.

Wed Apr 28 09:20:55 1993  Ian Lance Taylor  (ian@rtl.cygnus.com)

	* config/sparc/sun4sol2.mh (XM_CLIBS): Define to be -lnsl.

Wed Apr 28 06:11:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* Remote targets (mourn): Call unpush_target.

	* config/sparc/xm-sun4os4.h: Declare free() to return int.
	Remove twisted use of PARAMS.

	* config/rs6000/xm-rs6000.h: Don't define MALLOC_INCOMPATIBLE now
	that ansidecl.h assumes ANSI on AIX.

Tue Apr 27 10:01:33 1993  Jim Kingdon  (kingdon@cygnus.com)

	* README: Move most stuff about hacking GDB to doc/gdbint.texinfo.
	(Known bugs): Remove AIX bugs, revise SPARC struct bug description.

Tue Apr 27 13:44:19 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* expprint.c (print_subexp): Fix bug with OP_SCOPE operator output.

Tue Apr 27 10:01:33 1993  Jim Kingdon  (kingdon@cygnus.com)

	* remote-vx.c (net_connect): Allow numeric IP address for host.

Mon Apr 26 17:59:38 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* config/sh/sh.mt, config/sh/tm-sh.h, sh-tdep.c: New files.

Mon Apr 26 07:13:32 1993  Jim Kingdon  (kingdon@cygnus.com)

	* rs6000-tdep.c (branch_dest): Deal with stepping through system call.

	* symtab.h, xcoffread.c: Revise linetable sorting comments.

Sun Apr 25 02:32:16 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* valops.c (value_cast): A cast might also change the object
	representation in C++.
	* dbxread.c (end_psymtab): Copy subpst read_symtab function from pst
	to get the proper read_symtab function when called from mipsread.c.
	* mipsread.c (mipscoff_psymtab_to_symtab, psymtab_to_symtab_1):
	Set cur_bfd in psymtab_to_symtab_1 as CURBFD(pst) is invalid
	for dummy psymtabs, inhibit processing of dummy psymtabs.

Sat Apr 24 19:59:54 1993  Jim Kingdon  (kingdon@cygnus.com)

	* Changes from (or inspired by) AMD:
	* remote-udi.c (udi_attach): Assignments to Space and Offset were
	switched, fix it.
	(udi_wait): Make error message (UDIGetStdout) match error.
	(udi_wait): Handle UDIStdinNeeded.
	* command.c [CANT_FORK]: Use system().
	* utils.c (prompt_for_continue): Allow quit with 'q'.

	* solib.c (solib_add): Don't call special_symbol_handling if there
	were errors in symbol_add_stub.  Also set so->from_tty before
	calling symbol_add_stub.

Fri Apr 23 16:17:00 1993  Stu Grossman  (grossman@cygnus.com)

	* Merge in HPPA/BSD patches from Utah:
	* defs.h:  Add const to 2nd arg of psignal prototype.
	* hppah-tdep.c:  Renamed to hppa-tdep.c 'cuz it's common code with
	BSD now.
	* hppab-core.c:  Deleted.  No longer useful.
	* hppab-nat.c:  #include more files.  Use PT_WUREGS, not
	PT_WRITE_U.
	* hppab-tdep.c:  Deleted.  Supplanted by hppa-tdep.c.
	* config/pa/hppabsd.mh (NATDEPFILES):  Remove hppab-core.o.
	* config/pa/hppabsd.mt (TDEPFILES):  hppab-tdep.o => hppa-tdep.o
	* config/pa/hppahpux.mt (TDEPFILES):  hppab-tdep.o => hppa-tdep.o
	* config/pa/xm-hppab.h:  #define SET_STACK_LIMIT_HUGE.

Fri Apr 23 10:34:02 1993  Stu Grossman  (grossman@cygnus.com)

        * Fix two bugs found by deja-gnu.  One is the incorrect reporting
	of the PC being in a stack dummy when looking at a core file
	without symbols.  The other is the incorrect passing of char
	arguments during expression evaluation (ie: p foo('a','b') would
	mess up the passing of it's args because it wasn't coercing the
	char's to ints).
	* hppah-tdep.c:  Rename global functions to have consistent hppa_
	prefix.  Make more functions static.  Drop hp_ prefix from static
	functions.  (hppa_push_arguments):  Call value_arg_coerce to cast
	char to int args if necessary.  (hppa_fix_call_dummy):  Create
	this routine from FIX_CALL_DUMMY macro in tm-hppa.h.
	* inferior.h (PC_IN_CALL_DUMMY):  Check for frame_address being
	valid (ie: != 0) before doing comparison against PC.
	* valops.c (call_function_by_hand):  Adjust call to FIX_CALL_DUMMY
	to reflect new arguments.
	* config/pa/tm-hppa.h (POP_FRAME, PUSH_ARGUMENTS):  Use new hppa_
	prefix for func	name.  (FIX_CALL_DUMMY):  Move code into
	hppah-tdep.c.

	* testsuite/gdb.t16/gdbme.c, testsuite/gdb.t17/gdbme.c:  Add calls
	to malloc() so that we can test GDB eval of dynamically created
	arrays (like char strings in `print "foo"').

Fri Apr 23 01:28:14 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* printcmd.c (print_address_symbolic): Search symtabs as well as the
	minimal symbols for a nearby symbol.

Thu Apr 22 19:44:21 1993  John Gilmore  (gnu@cacophony.cygnus.com)

	* coffread.c:  Comment changes around minimal symbol recording.

Thu Apr 22 16:24:36 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* command.c: comment changes only.

	* mips-tdep.c (heuristic_fence_post): new static variable.
	  (heuristic_proc_start): use heuristic_fence_post, print better
	  warnings, but only if not stop_soon_quietly.
	  (_initialize_mips_tdep): add_set_cmd for heuristic-fence-post. 

Thu Apr 22 14:50:05 1993  Jim Kingdon  (kingdon@cygnus.com)

	* symtab.h: Fix LOC_REF_ARG comment.

Wed Apr 22 20:21:30 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)
			  and Jim Kingdon (kingdon@cygnus.com)

	* stabsread.c (define_symbol): Combine a 'p', 'r' arg pair to a
	LOC_REGPARM symbol.
	* config/sparc/tm-sparc.h (REG_STRUCT_HAS_ADDR): Revise comments.
	symfile.c (compare_symbols): Don't check first character; STRCMP
	does that.

	* stabsread.c (define_symbol): Generate a LOC_REGPARM_ADDR for
	structures that are passed by address in a register.
	* symtab.h (enum address_class): Add LOC_REGPARM_ADDR.
	* findvar.c (read_var_value),
	printcmd.c (address_info, print_frame_args),
	stack.c (print_frame_arg_vars), symmisc.c (print_{,partial_}symbol),
	* symtab.c (lookup_block_symbol): Deal with it.

Thu Apr 22 09:07:24 1993  Jim Kingdon  (kingdon@cygnus.com)

	* objfiles.h (obj_section), objfiles.c (build_objfile_section_table):
	Add objfile field.
	* objfiles.c (find_pc_section): Return a struct obj_section *.
	* sparc-tdep.c (in_solib_trampoline): Deal with find_pc_section return.
	* symfile.c (syms_from_objfile) [IBM6000_TARGET]:
	Don't use obj_section hack.
	* xcoffexec (vmap_symtab): Relocate obj_sections.
	* printcmd.c (containing_function_bounds): Use find_pc_section.

	* symtab.h: Clean up SYMBOL_VALUE comments.

Wed Apr 21 14:29:57 1993  Jim Kingdon  (kingdon@cygnus.com)

	* stack.c (print_frame_arg_vars), printcmd.c (print_frame_args):
	Expand comments about LOC_ARG/LOC_LOCAL pairs.

	* coffread.c (read_coff_symtab): Use rewind before fseek.

Wed Apr 21 14:24:19 1993  Per Bothner  (bothner@cygnus.com)

	* ch-exp.y:  Removed unused structure_primitive_value and FIXME_23.
	* Makefile.in:  Add $(YFLAGS) when using $(YACC).
	* Makefile.in:  Remove message to expect conflicts and unused
	rules in ch-exp.y, since there no longer are any such.

Wed Apr 21 13:27:50 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* stabs.texinfo: fixed bad xrefs (un-initialized statics)

Tue Apr 20 08:55:11 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffexec.c (xcoff_relocate_core): If no exec file, error()
	rather than dumping core.

	* Makefile.in: Add ${srcdir}/ to all source files.
	(alldeps.mak): Add "${srcdir}/" to files when generating alldeps.mak.
	(TAGS): Deal with srcdir and new config directory scheme.
	createtags: Remove.
	Makefile.in (NONSRC): Remove createtags.
	alldeps.mak: Updated.

	* rs6000-tdep.c: Delete unused function print_frame.

	* frame.h (struct frame_info): Doc fix for next_frame.
	New field signal_handler_caller.
	blockframe.c (create_new_frame, get_prev_frame_info),
	config/rs6000/tm-rs6000.h (INIT_EXTRA_FRAME_INFO): Set it (needs
	INIT_FRAME_PC_FIRST).
	stack.c (print_frame_info), rs6000-tdep.c (rs6000_frame_chain):
	Check it.

Mon Apr 19 22:52:33 1993  Stu Grossman  (grossman@cygnus.com)

	* irix4-nat.c (fetch_core_registers):  Special version of this for
	Irix 4.x, which stores regs a bit differently from other /proc
	based systems.
	* procfs.c, core-svr4.c:  Move fetch_core_registers from procfs.c
	to new file core-svr4.c.
	* config/i386/i386sol2.mh, config/i386/i386v4.mh, config/m68k/amix.mh,
	config/i386/ncr3000.mh, config/sparc/sun4sol2.mh:  Add core-svr4.o
	to NATDEPFILES.
	* config/mips/irix4.mh:  Add corelow.o to NATDEPFILES.

Mon Apr 19 11:13:34 1993  Jim Kingdon  (kingdon@cygnus.com)

	* i387-tdep.c: Remove unused #includes.

	* configure.in: Match i[34]86-*-sysv3.2 not i[34]86-*-sysv32.

	* config/i386/nm-i386v.h: Define NO_PTRACE_H.

Sun Apr 18 10:39:35 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c: Nuke NO_DEFINE_SYMBOL code.  There is no going back.

	* stabsread.c (define_symbol): 'R' is synonym for 'P', not 'r'.
	xcoffread.c (process_xcoff_symbol, case C_RPSYM):
	Don't muck with SYMBOL_CLASS.

Fri Apr 16 17:38:33 1993  Stu Grossman  (grossman@cygnus.com)

	* munch:  Don't use head command.  It doesn't exist everywhere.

Fri Apr 16 15:07:57 1993  Fred Fish  (fnf@cygnus.com)

	* inflow.c (new_tty):  Remove spurious 'o' character at end
	of #endif line.

Fri Apr 16 12:27:11 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mips-tdep.c (mips_skip_prologue): Always skip the typical prologue
	instructions and nothing more.
	* mipsread.c (add_line): Add comment why we have to combine line number
	entries for the same line number.

Fri Apr 16 09:42:03 1993  Jim Kingdon  (kingdon@cygnus.com)

	* symtab.{c,h}: Doc fixes (remove symseg references, last relevant
	in gdb 2.8!).

Thu Apr 15 21:16:58 1993  Fred Fish  (fnf@cygnus.com)

	* depend, alldeps.mak:  Update, now that gcc -MM bug is fixed.

Thu Apr 15 12:38:39 1993  Jim Kingdon  (kingdon@cygnus.com)

	* source.c (select_source_symtab): Clean up comment.  Also, if
	we have a current_source_symtab, and s is NULL, return without
	doing anything.
	xcoffread.c (xcoff_symfile_read): Don't call select_source_symtab.
	breakpoint.c (breakpoint_re_set): Don't call select_source_symtab.

Thu Apr 15 02:37:48 1993  John Gilmore  (gnu@cacophony.cygnus.com)

	* dbxread.c (unknown_symchar_complaint):  Add new complaint.
	* stabsread.h:  Declare it.
	* partial-stab.h:  Use it.

	* utils.c (malloc_botch):  Don't forward-declare if NO_MMALLOC.

Wed Apr 14 17:12:51 1993  Jim Kingdon  (kingdon@cygnus.com)

	* stack.c (print_frame_info): Print specially if dummy frame.

	* breakpoint.c: Add comments regarding within_scope future direction.

	* Version 4.8.3.

	* xcoffread.c (record_include_{begin,end}): Change fatal to complain.

Wed Apr 14 14:03:18 1993  Per Bothner  (bothner@cygnus.com)

	* ch-exp.y:  Fix thinko that broke parsing of FALSE.

Wed Apr 14 12:49:29 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* stabsread.c (read_member_functions): Initialize domain for stubbed
	member functions to avoid gdb core dumps when printing pointers
	to member functions.
	* cp-valprint.c (cp_print_class_method): Check for stubbed member
	functions.

Tue Apr 13 08:28:26 1993  Jim Kingdon  (kingdon@cygnus.com)

	* expprint.c (print_subexp): If opcode not found in op_print_tab,
	stop with an error().
	eval.c (evaluate_subexp): Change error message.

	* objfiles.c (build_objfile_section_table): Cast return value
	from obstack_finish.

Mon Apr 12 10:53:50 1993  Jim Kingdon  (kingdon@cygnus.com)

	* config/rs6000/tm-rs6000.h, rs6000-tdep.c: Move FRAME_CHAIN
	to rs6000_frame_chain and deal with it if we're in a signal handler.
	(FRAME_SAVED_PC): Use rs6000_frame_chain.

	* breakpoint.c (within_scope): New function.
	(enable_breakpoint, watchpoint_check): Use it.

	* source.c (openp): Handle "exec-file ./ls" correctly.

	* breakpoint.c (breakpoint_1): Use wrap_here before "at".

Sat Apr 10 01:32:43 1993  Per Bothner  (bothner@rtl.cygnus.com)

	* ch-exp.y:  Clean up lexing of identifiers and
	reserved words.  (E.g. don't recognize FALSEXXX as the
	keyword FALSE followed by the identifier XXX.)
	Also, convert identifiers to lower case.

Fri Apr  9 15:53:19 1993  Stu Grossman  (grossman@cygnus.com)

	* remote-mips.c, remote-monitor.c, remote-st2000.c:  Convert to
	new serial interface.

Fri Apr  9 15:01:12 1993  Stu Grossman  (grossman@cygnus.com)

	* remote.c (remote_open):  Use SERIAL_OPEN instead of serial_open.
	(putpkt, getpkt):  Use new return codes for SERIAL_READCHAR.
	* ser-go32.c:  Return -1 on most failures, 0 on most successes,
	and use new return codes for go32_readchar().
	* ser-unix.c:  Ditto.  Also, move error handling up to caller for
	SERIAL_SETBAUDRATE().
	* serial.c (serial_open):  Internal call, not SERIAL_OPEN to get
	to specific routine.
	(serial_close):  New routine to wrap around device close routine.
	serial.h:  Clean & document return values more clearly.

Fri Apr  9 10:20:55 1993  Jim Kingdon  (kingdon@cygnus.com)

	* rs6000-pinsn.c (print_operand): Deal with no operand instructions.

	* rs6000-pinsn.c (print_operand, case LI): Print condition register
	operand in decimal rather than wrong textual versions.

	* printcmd.c (_initialize_printcmd): Clean up docstring for "x"
	(mention 't', remove false thing about 'g' only good with 'f').

	* breakpoint.h: move "struct breakpoint" and friends to top of
	file so that bpstat_find_breakpoint prototype works.

	* solib.c (struct so_list): Add bfd field.
	(solib_map_sections): Leave bfd open and scratch_pathname allocated.
	Put the bfd in bfd field of the so_list.
	(clear_solib): Free bfd name and close_bfd on the bfd.

Fri Apr  9 00:45:41 1993  Per Bothner  (bothner@rtl.cygnus.com)

	* valarith.c (value_subscript):  Add COERCE_REF.
	* ch-exp.y (operand_5):  We can generalize the 2nd operand
	of a string repetition ot 'literal' without ambiguity.

Thu Apr  8 10:15:10 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* breakpoint.h (struct bpstat): Remove momentary field.
	Remove bpstat_momentary_breakpoint.  This was always kludgy
	and is no longer used.

	* breakpoint.h: Add enum bpstat_what.
	breakpoint.h (struct bpstat), breakpoint.c (bpstat_stop_status):
	stop and print fields of bpstat now per-breakpoint, not just
	one for the whole chain.
	breakpoint.{c,h} (bpstat_what): New function.
	breakpoint.h: Remove bpstat_stop and bpstat_should_print.
	infrun.c: Replace switch (stop_bpstat->breakpoint_at->type)
	with call to bpstat_what.
	README: Remove watchpoint/breakpoint bug from known bugs.

	* breakpoint.h: Prototype bpstat_find_breakpoint.

Thu Apr  8 16:01:21 1993  Fred Fish  (fnf@cygnus.com)

	* symtab.c (find_methods, gdb_mangle_name):  Note that functions
	are g++ specific.
	* symtab.h (VTBL_FNADDR_OFFSET, OPNAME_PREFIX_P, VTBL_PREFIX_P,
	DESTRUCTOR_PREFIX_P):  Note that macros are g++ specific.

Thu Apr  8 12:45:32 1993  Ian Lance Taylor  (ian@cygnus.com)

	* i960-pinsn.c (tabent): Copied struct definition from
	opcodes/i960-dis.c.

Thu Apr  8 10:34:37 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* symtab.h (DESTRUCTOR_PREFIX_P): New macro to check if physname
	is a C++ destructor.
	* symtab.c (gdb_mangle_name): Use it.
	* symtab.c (find_methods): Do not add destructors to choice list
	for constructors.
	* symtab.c (decode_line_1): Make breakpoints on destructors work
	for gcc-2.x again.

Wed Apr  7 18:43:09 1993  Stu Grossman  (grossman@cygnus.com)

	* ser-go32.c:  Make it use serial port name.
	* go32-xdep.c:  Put in def for strlwr, needed by dir.o in go32 libc.

	* infcmd.c (read_pc):  Make sure that we read PC_REGNUM when not
	in a system call!

Wed Apr  7 15:52:11 1993  Stu Grossman  (grossman@cygnus.com)

	* configure.in:  Only configure sparclite subdir when target_cpu
	is sparclite.

Wed Apr  7 10:11:22 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c (struct coff_symbol): Change c_sclass to unsigned char.
	Remove FIXME comment regarding this.

	* symfile.h: Change NULL->'\0' in comment (that wasn't a typo).

	* xcoffread.c (read_xcoff_symtab): Use E_SYMNMLEN.

Tue Apr  6 22:30:58 1993  K. Richard Pixley  (rich@cygnus.com)

	Add section table to objfile struct.  Use it for find_pc_section.
	* objfiles.c (add_to_objfile_sections,
	  build_objfile_section_table, find_pc_section): new functions.
	  (allocate_objfile): build section table.
	* objfiles.h (struct obj_section): new structure.
	  (struct objfile): add section table.
	  (find_pc_section): new prototype.
	* solib.[ch] (find_pc_section_from_so_list): removed.
	* sparc-tdep.c: include objfiles.h for find_pc_section.  include
	  symfile.h for objfiles.h.
	  (in_solib_trampoline): adjusted for new find_pc_section
	  prototype.  Removed BAD_RICH_HACK ifdefs.
	* symfile.c (syms_from_objfile): offset objfile sections.
	  (find_pc_section): removed.  Also removed BAD_RICH_HACK ifdefs.
	* symfile.h (find_pc_section): prototype removed.  Also fixed
	  comment typo NUL -> NULL.
	* target.[ch] (find_pc_section_from_targets): removed.
	* config/sparc/tm-sun4sol2.h (BAD_RICHH_HACK): removed.

Tue Apr  6 21:41:13 1993  Stu Grossman  (grossman@cygnus.com)

	* ser-go32.c:  Format.  (go32_open):  Use proper return value.

	* configure.in:  Undo conditional configdirs hack for sparclite.

Tue Apr  6 17:07:37 1993  Jim Wilson  (wilson@sphagnum.cygnus.com)

	* symtab.c (list_symbols): When call break_command, pass both
	filename and function name not just function name.

Tue Apr  6 15:00:09 1993  Fred Fish  (fnf@cygnus.com)

	(Changes and new files to make "none" a full fledged configuration)
	* config/none/{nm-none.h, tm-none.h, xm-none.h}:  New files.
	Currently only tm-none.h has any meaningful contents.
	* config/none/none.mh (NAT_FILE):  Use nm-none.h
	* config/none/none.mh (XM_FILE):  Use xm-none.h
	* config/none/none.mt (TM_FILE):  Use tm-none.h
	* Makefile.in (depend):  Remove comment about parse errors in
	valops.c, it now parses correctly and generates a correct depend
	line.  Remove line that touches xm.h, tm.h, and nm.h; they are
	now linked to config/none/{xm-none.h, tm-none.h, nm-none.h}.

Tue Apr  6 09:54:29 1993  Jim Kingdon  (kingdon@cygnus.com)

	* values.c (USE_STRUCT_RETURN): Only use gcc wierdness for gcc1.

	* xcoffread.c (read_xcoff_symtab): Deal correctly with symbols of
	exactly 8 characters.

Tue Apr  6 10:31:26 1993  Stu Grossman  (grossman@cygnus.com)

	* configure.in:  Sparclite uses sparc config dir.  Also has it's
	own tm- & .mt files now.  Also add sparclite to configdirs.
	* go32-xdep.c:  Dummy routines for sigsetmask & strlwr.
	* config/i386/go32.mh:  Nullify def of TERMCAP.
	* config/i386/xm-go32.h:  Get rid of redef of EIO.
	* config/sparc/{sparclite.mh tm-sparclite.h}:  New sparclite
	specific configs.  Very similar to sun4os4, but without solib.
	* sparclite/{Makefile.in configure.in}:  First cut at making this
	dir configgable.

Tue Apr  6 03:10:44 1993  Stu Grossman  (grossman@cygnus.com)

	* ser-go32.c:  First cut at adapting to new serial interface.

Mon Apr  5 22:29:43 1993  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in (SFILES OBS):  Add serial.[co] & ser-hardwire.[co].
	These implement a new serial line interface for talking to remote
	targets.
	* configure.in:  Link ser-hardwire.c to ser-unix.c for all hosts,
	EXCEPT go32, which gets ser-go32.c.
	* remote.c:  Use new serial interface.  More remote-xxx's to be
	converted later.
	* ser-bsd.c, ser-termios.c:  Removed.
	* serial.c:  New.  Implements common operations for all serial
	types.
	* ser-unix.c:  New.  Unix specific serial operations for various
	flavors of Unix (Posix, SysV, BSD).
	* serial.h:  Generic serial interface defs.
	* config/i386/go32.mh, config/i386/i386bsd.h,
	config/m68k/apollo68b.mh, config/sparc/sun4os4.mh:  Remove
	ser-bsd.o from XDEPFILES.  All the magic is now handled in
	configure.in.

Mon Apr  5 20:48:54 1993  Stu Grossman  (grossman@cygnus.com)

	* config/h8500/tm-h8500.h:  Clean up brain damage found by GCC.

Fri Apr  2 08:23:14 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c (xcoff_symfile_offsets): Use 0 not addr for offsets.

	* rs6000-tdep.c (frameless_function_invocation): Don't even think
	about framelessness except on the innermost frame.

	* xcoffexec.c: Call fatal() not abort().

	* stabsread.c (patch_block_stabs): If stab & no symbol, make
	a LOC_OPTIMIZED_OUT symbol.
	symtab.h (enum address_class): Add LOC_OPTIMIZED_OUT.
	findvar.c (read_var_value), printcmd.c (address_info),
	symmisc.c (print_{,partial_}symbol), c-exp.y (variable),
	m2-exp.y (yylex): Deal with it.
	ch-exp.y (yylex): Deal with it.

Thu Apr  1 18:43:02 1993  Stu Grossman  (grossman@cygnus.com)

	* findvar.c (value_from_register):  H8500 specific, check to see
	if we are looking at short pointer.  If so, skip crock.
	* h8500-tdep.c (h8500_frame_chain):  Mask down value from
	read_memory_integer() to avoid getting messed up by sign extension.

Thu Apr  1 16:44:41 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* sparc-tdep.c (in_solib_trampoline), symfile.c (find_pc_section):
	  ifdef protect using BAD_RICH_HACK.  This should be removed soon.
	* config/sparc/tm-sun4sol2.h (BAD_RICH_HACK): define.

Thu Apr  1 09:01:38 1993  Jim Kingdon  (kingdon@cygnus.com)

	* i960-pinsn.c, a29k-pinsn.c: Much abridged, just use libopcodes.a.

	* core.c (dis_asm_print_address): New function.

	* core.c (dis_asm_read_memory): Reinstate 4th arg.  The prototype
	has been fixed.

Thu Apr  1 09:34:43 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* breakpoint.c (bpstat_print, bpstat_stop_status): Change to walk the
	entire breakpoint chain and print only the first entry that needs to
	be printed and needs to be stopped for. Fixes problems with printing
	of multiple breakpoints with different conditions.
	* breakpoint.c (print_it_done): Renamed from print_it_noop as it
	effectively stops printing of the breakpoint chain.
	* breakpoint.c (print_it_noop): New routine to print nothing
	for this breakpoint entry and dont stop printing.
	* breakpoint.c (breakpoint_re_set_one): mention the reevaluated
	watchpoint only if it is enabled.
	* mipsread.c (parse_procedure): Correct incorrect setjmp procedure
	descriptor from the library to make backtraces through setjmp work.
	* mipsread.c (fixup_sigtramp): Correct pcreg and fregoffset for
	sigtramp.
	* mips-tdep.c (read_next_frame_reg): Provide correct values for
	all registers saved within sigtramp, cleanup.

Wed Mar 31 12:52:12 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* sparc-pinsn.c: Much abridged, just calls version in libopcodes.a.

Wed Mar 31 21:23:41 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* core.c (dis_asm_read_memory): drop fourth arg which conflicts
	  with prototype in ../include/dis-asm.h.

Wed Mar 31 12:52:12 1993  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* core.c (dis_asm_{read_memory,memory_error}): New functions.
	m68k-pinsn.c, h8500-tdep.c, i386-pinsn.c, mips-pinsn.c, z8k-tdep.c:
	Use read_memory_func interface to disassembler.

Tue Mar 30 15:46:14 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	Teach sparc solaris to next over shared library functions.
	* solib.[hc] (find_pc_section_from_so_list): new function and
	  prototype.
	* sparc-tdep.c (in_solib_trampoline): new function.
	* symfile.[hc] (find_pc_section): new function and prototypes.
	* target.[hc] (find_pc_section_from_targets): new function and
	  prototypes.
	* config/sparc/tm-sun4sol2.h (IN_SOLIB_TRAMPOLINE): redefine to
	  in_solib_trampoline.

Tue Mar 30 08:06:24 1993  Jim Kingdon  (kingdon@cygnus.com)

	* infrun.c (wait_for_inferior): Revise comment.

	* command.c (do_setshow_command): Use %u with var_{u,z}integer.

	* command.{c,h}: New var_type var_integer.
	main.c: Use it for history_size.

	* rs6000-tdep.c, xcoffexec.c, config/rs6000/xm-rs6000.h, breakpoint.c:
	Lint and byte-order fixups.

	* breakpoint.c (print_it_normal): Return 0 after hitting watchpoint.

	* breakpoint.h (bpstat): New field print_it.
	breakpoint.c (bpstat_print): Use it.
	(print_it_normal): New function (from old bpstat_print code).
	(bpstat_{alloc,stop_status}): Set print_it field.

	* breakpoint.c (bpstat_stop_status): Use catch_errors when
	evaluating watchpoint condition, via new function watchpoint_check.
	Also stop if watchpoint disabled due to leaving its block.

	* findvar.c [REG_STRUCT_HAS_ADDR]: Add comment.

Tue Mar 30 00:14:38 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mips-pinsn.c: Add missing include of dis-asm.h.

Mon Mar 29 15:03:25 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (clean, distclean, realclean):  Recursively apply
	to subdirs first, rather than last.  This avoids, for example,
	Makefile being removed in a parent directory before the recursive
	make is run.

	* alldeps.mak, depend:  Update for below changes.

	* config/m68k/tm-m68k.h:  Renamed from config/m68k/tm-68k.h.
	* m68k/{tm-3b1.h, tm-altos.h, tm-amix.h, tm-es1800.h,
	tm-hp300bsd.h, tm-hp300hpux.h, tm-isi.h, tm-news.h, tm-os68k.h,
	tm-st2000.h, tm-sun2.h, tm-sun3.h, tm-vx68.h}:  Include tm-m68k.h
	instead of tm-68k.h.
	* Makefile.in (HFILES):  tm-68k.h renamed to tm-m68k.h.
	* README, a29k-pinsn.c, m68k-pinsn.c, m68k-stub.c, remote-vx.c,
	m68k/{altos.mh, altos.mt, apollo68b.mh, nm-apollo68b.h,
	nm-hp300bsd.h, config/m68k/xm-apollo68b.h}:  Map '68k' to 'm68k'.
	* a29k/tm-a29k.h, doc/gdbint.texinfo:  Account for renaming of
	tm-68k.h to tm-m68k.h.
	* m68k/m68k-fp.mt (TM_FILE):  tm-68k-fp.h renamed to tm-m68k-fp.h.
	* m68k/m68k-nofp.mt (TM_FILE):  tm-68k-nofp.h renamed to
	tm-m68k-nofp.h.

	* config/a29k/tm-a29k.h:  Renamed from config/a29k/tm-29k.h.
	* a29k-pinsn.c:  Renamed from am29k-pinsn.c.
	* a29k-tdep.c:  Renamed from am29k-tdep.c.
	* remote-eb.c, config/a29k/tm-ultra3.h:  Include renamed tm-a29k.h.
	* remote-monitor.c, remote-st2000.c, config/a29k/{nm-ultra3.h,
	tm-a29k.h, xm-ultra3.h}, config/romp/rtbsd.mh, doc/gdbinv-s.texi,
	testsuite/gdb.t15/funcargs.exp, testsuite/gdb.t17/callfuncs.exp:
	Map '29k' to 'a29k'.
	* config/a29k/{a29k-kern.mt, a29k-udi.mt, a29k.mt, ultra3.mt}
	(TDEPFILES):  Use renamed a29k-pinsn.o and a29k-tdep.o.
	* config/a29k/{a29k-udi.mt, a29k.mt} (TM_FILE):  Use renamed
	tm-a29k.h.
	* config/a29k/a29k-udi.mt (MT_CFLAGS):  Remove TARGET_AM29K
	define that does not appear anywhere else in the gdb source tree.
	* doc/gdbinit.texinfo:  Document renaming of tm-29k.h to tm-a29k.h.

Mon Mar 29 13:55:29 1993  Jim Kingdon  (kingdon@cygnus.com)

	* breakpoint.c: Add comments regarding breakpoint_re_set.

	* xcoffread.c (sort_syms, compare_symbols): Remove.
	(xcoff_symfile_read): Use sort_all_symtab_syms from symfile.c
	not our own sort_syms (it is identical).

	* xcoffread.c: Nuke NAMES_HAVE_DOT define (not used).

Sun Mar 28 11:24:37 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* breakpoint.c (breakpoint_re_set_one): Fix storage leak.
	* breakpoint.c (enable_breakpoint): Don't enable watchpoint if it
	went out of scope.
	* exec.c (exec_close): Fix storage leak.
	* exec.c (exec_file_command): Make sure that bfd doesn't realign the
	output sections when patching an executable.
	* mips-nat.c (store_inferior_registers): Use REGISTER_PTRACE_ADDR
	when writing all registers.
	* mips-tdep.c (mips_push_dummy_frame): Save floating point registers
	at the right offset in the dummy frame.
	* mipsread.c (psymtab_to_symtab_1): Do not complain for stProc,
	stStaticProc and stEnd symbols as they are generated by gcc-2.x.
	* mipsread.c (mipscoff_new_init): Initialize stabsread and buildsym.

Fri Mar 26 15:25:05 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (TARFILES):  Avoid trailing backslash.

Fri Mar 26 11:29:30 1993  Jim Kingdon  (kingdon@cygnus.com)

	* breakpoint.{c,h}: Add exp_string to struct breakpoint and use
	it in breakpoint_re_set.
	* breakpoint.c (watch_command, enable_breakpoint): Fetch lazy values.

	* rs6000-tdep.c (single_step): Misc cleanups (CORE_ADDR not int,
	don't use sizeof(int) for target stuff, etc).

Thu Mar 25 15:03:53 1993  Fred Fish  (fnf@cygnus.com)

	* alldeps.mak, configure.in, i860-break.h, i860-opcode.h,
	i860-pinsn.c, i860-tdep.c, config/i860/*:  Remove incomplete i860
	support that can't be integrated anyway due to lack of clear
	authorship.

Thu Mar 25 12:26:50 1993  Stu Grossman  (grossman@cygnus.com)

	* findvar.c (read_register, write_register):  Make these capable
	of reading/writing registers that are shorter than REGISTER_TYPE.
	* (value_from_register):  Install H8500 specific code to return
	proper value when register is being used as a pointer.
	* h8500-tdep.c:  Remove extra defines of NUM_REGS.
	(h8500_skip_prologue):  Use correct lengths for LINK instructions.
	(FRAME_CHAIN):  Change name to h8500_frame_chain.  Rewrite code to
	chain frames properly by combining frame pointer with T reg.
	(init_extra_frame_info):  Delete.  It's now a macro.
	(frame_args_address):  Don't add PTR_SIZE.  Stack args are already
	offset by the correct amount off of the frame pointer.
	(register_byte):  Delete.  It's now a macro.
	(register_raw_size, register_virtual_size):  Delete.  Replaced by
	common routine h8500_register_size, cuz there's no difference
	between the raw & virtual sizes on this machine.
	(register_convert_to_raw, register_convert_to_virtual):  Delete,
	cuz there's no difference between the raw & virtual forms.
	Replaced by memcpy in tm file.
	(register_virtual_type):  Rename to h8500_register_virtual_type.
	Get rid of pointer pseudo-regs, use _REGNUM with all reg names.
	(_initialize_h8500_tdep):  Get rid of crock to ensure that GDB &
	emulator have same reg offsets.  This is all handled in the
	simulator code now.
	(h8500_trapped_internalvar):  New routine to detect references to
	convenience vars acting as pointer pseudo-regs.
	(h8500_value_trapped_internalvar):  Conjure up value of pointer
	pseudo-regs.
	(h8500_set_trapped_internalvar):  Convert set value in real
	register references.
	infcmd.c (read_pc, write_pc):  Add h8500 specific code to handle
	code segment register.
	infrun.c (proceed):  Simplify.  Call write_pc instead of doing it
	by hand.
	(wait_for_inferior):  Add h8500 specific code to add stack segment
	when reading SP register.
	remote-sim.c (fetch_register):  Spacing.
	tm-h8500.h:  #define GDB_TARGET_IS_H8500 to make it easier to
	detect cruft.  Redo all register manipulation stuff.  Get rid of
	pointer pseudo-regs.  (INIT_EXTRA_FRAME_INFO):  Adds stack segment
	to frame pointer.  (IS_TRAPPED_INTERNALVAL,
	VALUE_OF_TRAPPED_INTERNALVAR, SET_TRAPPED_INTERNALVAR):  Use these
	to create internal vars for pointer pseudo-regs.

Thu Mar 25 10:10:28 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in:  Numerous small changes to macro definitions
	and rules for building gdb distribution tree.  Many macros
	eliminated or merged, and rules simplified.
	* alldeps.mak:  Update.
	* depend:  Update.

Wed Mar 24 13:52:29 1993  david d `zoo' zuhn  (zoo at poseidon.cygnus.com)

	* Makefile.in: recurse through SUBDIRS for dvi target too

Wed Mar 24 08:48:30 1993  Jim Kingdon  (kingdon@cygnus.com)

	* Clean up xcoff relocation.
	objfiles.h (struct objfiles): Add section_offsets, num_sections.
	symfile.c (syms_from_objfile), xcoffread.c (xcoff_symfile_offsets):
	Set them.
	symtab.h (struct general_symbol_info): Add section field.
	minsyms.c (prim_record_minimal_symbol{,_and_info}): Set it.
	xcoffread.c: Set section for symbols and msymbols.
	(struct symtab): Add block_line_section field.
	buildsym.c (end_symtab): Set it.
	(end_symtab and callers): Add section parameter.
	objfiles.c (objfile_relocate): New funciton.
	xcoffexec.c (vmap_symtab): Use it.
	xcoffsolib.h (struct vmap): Remove unused fields.
	config/rs6000/tm-rs6000.h, stack.c, xcoffexec.c: Remove
	CORE_NEEDS_RELOCATION, symtab_relocated.
	config/rs6000/tm-rs6000.h: Remove use of loadinfotext.
	rs6000-tdep.c: Make loadinfotext static.
	breakpoint.c (fixup_breakpoints): Doc fix.
	symtab.h (struct symtab), config/rs6000/tm-rs6000.h, buildsym.c
	(end_symtab): primary field replaces nonreloc.

Tue Mar 23 00:10:53 1993  John Gilmore  (gnu@cygnus.com)

	* symtab.h (struct linetable_entry):  Remove confusing comment.

Tue Mar 23 00:01:23 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* Makefile.in: add installcheck target

Mon Mar 22 16:17:58 1993  Fred Fish  (fnf@cygnus.com)

	* config/{a29k, arm, convex, gould, h8300, i386, i860, i960, m68k,
	m88k, mips, none, ns32k, pa, pyr, romp, rs6000, sparc, tahoe, vax,
	z8k}:  New directories to hold cpu specific configuration files.
	Naming follows gcc convention.
	* config/{*.mt, *.mh}:  All target and host makefile fragment
	config files moved to an appropriate config/<cpu> subdirectory.
	* nm-*, xm-*, tm-*:  All native, host, and target files, which
	get linked to nm.h, xm.h, and tm.h respectively by configure,
	moved to appropriate config/<cpu> subdirectory.
	* nm-sysv4.h, xm-sysv4.h, tm-sysv4.h, tm-sunos.h, nm-trash.h:
	Native, host, and target files that are common across more than
	one cpu architecture and included by one of the configured
	native, host, or target files, get moved to config directory.
	* Makefile.in (INCLUDE_CFLAGS):  Add -I${srcdir}/config to
	pick up native, host, or target include files moved to one of
	the config subdirectories, and that are included by other files.
	* Makefile.in (alldeps.mak):  Modify to account for new config
	directory structure.
	* alldeps.mak, depend:  Update for new config directory structure.
	* config/*/[ntx]m-*.h:  Modify all files that include other
	[ntx]m-*.h files to use path relative to gdb/config.  I.E.
	"a29k/tm-ultra3.h" includes "a29k/tm-29k.h" rather than just
	"tm-29k.h".
	* remote-eb.c (tm-29k.h):  Include a29k/tm-29k.h.
	* mipsread.c (tm-mips.h):  Include mips/tm-mips.h.
	* i860-pinsn.c (tm-i860.h):  Include i860/tm-i860.h.
	* configure.in:  Default gdb_host_cpu to host_cpu, and remap
	the ones where the default is not unique or different than the
	config subdirectory name.  Similarly, handle gdb_target_cpu.
	Modify configure.in as appropriate to make use of gdb_host_cpu
	and gdb_target_cpu to find makefile fragments and make links.

Mon Mar 22 12:36:24 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mipsread.c (compare_blocks): Sort blocks with the same start
	address by decreasing ending address.

Mon Mar 22 20:36:04 1993  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mipsread.c (parse_procedure): Save cur_fdr accross call to
	lookup_symbol as it might get clobbered by the call.

	* mipsread.c (parse_partial_symbols): Use ADD_PSYMBOL_ADDR_TO_LIST.
	The previous code did not initialize the language field for the psymtab
	entry.

Sat Mar 20 00:33:39 1993  John Gilmore  (gnu@cygnus.com)

	* c-exp.y (parse_number):  Avoid shift warning.
	* serial.h (struct ttystate):  Declare empty one on DOS.

Fri Mar 19 12:59:50 1993  Stu Grossman  (grossman@cygnus.com)

	* xm-sun4os4.h:  Return type of free() should be void, not int.

	* vx-share/vxWorks.h:  Remove #def of NULL.

Fri Mar 19 11:28:18 1993  Jim Kingdon  (kingdon@cygnus.com)

	* tm-rs6000.h: Nuke no-op STAB_REG_TO_REGNUM.

Fri Mar 19 07:40:09 1993  Steve Chamberlain  (sac@cygnus.com)

	* z8k-tdep.c (print_insn): Include the new dis-asm header file.

Thu Mar 18 14:26:57 1993  Per Bothner  (bothner@rtl.cygnus.com)

	* ieee-float.c: Moved to ../libiberty.
	* ieee-float.h: Moved to ../include.
	* Makefile.in:  Update accordingly.
	* i386-pinsn.c (print_insn), m68k-pinsn.c (print_insn):
	Convert to stubs that call disassemblers in ../opcodes/*-dis.c.
	* m68k-tdep.c:  Removed definition of ext_format ext_format_68881;
	it is now in ../opcodes/m68881-ext.c.
	* mips-tdep.c (mips_skip_prologue):  Try to skip more of the
	prologue (some callers _do_ care).
	* mips-pinsn.c (print_insn), z8k-tdep.c (print_insn):  Convert to
	new interface of ../opcodes/*-dis.c. 
	* ch-exp.y:  Add #include <ctype.h>.

Thu Mar 18 11:57:49 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffexec.c (exec_close): Don't close exec_bfd twice.

	* xcoffread.c (enter_line_range): endaddr is exclusive, not inclusive.

Wed Mar 17 09:46:31 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c (arrange_linetable): Use x{m,re}alloc not {m,re}alloc.

Wed Mar 17 11:28:11 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* z8k-tdep.c (extract_return_value, write_return_value,
	store_struct_return): New functions from macros in tm-z8k.h.
	
Wed Mar 17 11:23:06 1993  Fred Fish  (fnf@cygnus.com)

	* valops.c (value_arg_coerce):  Apply temporary patch to
	fix problem with coercion of array and function types when
	passed as arguments to C functions, pending a more complete
	review of when and how coercion should be done, depending
	upon context and language.

Wed Mar 17 09:46:31 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c (MIN_TBTABSIZ): Change to 12.

	* xcoffread.c (xcoff_symfile_read): Only read stringtab and
	debugsec if there are a non-zero number of symbols.

Tue Mar 16 18:08:45 1993  John Gilmore  (gnu@cygnus.com)

	* command.c (show_user):  Avoid fprintf_filtered botch (AGAIN!).

Tue Mar 16 15:18:17 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffexec.c (add_vmap): Wrap symbol read in catch_errors.

	* xcoffread.c (read_symbol_lineno): Look to end of symbols for .bf,
	not just 50 symbols.
	(symtbl_num_syms): New variable.
	(read_xcoff_symtab): Set it.
	(read_symbol_nvalue): Check for bad symno.
	(read_symbol_{lineno,nvalue}, callers): Don't pass symtable; it's
	always symtbl.

Tue Mar 16 10:09:05 1993  Stu Grossman  (grossman@cygnus.com)

	* config/rs6000.mh:  Get rid of -Dfd_set=int crock.
	This is defined in defs.h if necessary.
	* vx-share/vxWorks.h:  Remove #defs of min and max.
	* vx-share/xdr_ld.c, vx-share/xdr_ptrace.c,
	vx-share/xdr_rdb.c:  include defs.h.

Fri Mar 12 09:33:23 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffread.c (retrieve_tracebackinfo): Move assignment out
	of while condition.

	* xcoffread.c (enter_line_range): complain() on bad endoffset.
	xcoffread.c: Doc fixes.

Tue Mar  9 09:56:12 1993  Jim Kingdon  (kingdon@cygnus.com)

	* tm-rs6000.h (CORE_NEEDS_RELOCATION): Just call xcoff_relocate_core.
	xcoffexec.c (xcoff_relocate_core): New function.
	(text_adjustment): Removed.
	(add_vmap): Return the vmap.
	rs6000-tdep.c (add_text_to_loadinfo): No longer static.

Fri Mar  5 05:22:46 1993  Jim Kingdon  (kingdon@cygnus.com)

	* xcoffsolib.h: Add objfile member to struct vmap.
	xcoff{exec,solib}.c: Use it, not lookup_objfile_bfd.
	xcoffexec.c (add_vmap): Allocate objfiles here.

Sun Mar 14 02:54:15 1993  John Gilmore  (gnu@cygnus.com)

	Support 68000 series without floating point.

	* configure.in (m68000-*-{aout,elf,coff}):  New configs.
	* tm-68k-nofp.h:  New file, lacks 68881 support.
	* config/m68k-nofp.mt:  New file.

Sun Mar 14 02:30:08 1993  John Gilmore  (gnu@cygnus.com)

	Remove a few remaining underscore/no-underscore remnants from
	config files.

	* config/{m68k-un.mt, sparc-un.mt}:  Remove.
	* config/m68k-noun.mt: Rename to m68k-fp.mt.
	* config/sparc-noun.mt: Rename to sparc-em.mt.
	* tm-68k-noun.h, tm-spc-noun.h:  Remove.
	* tm-68k-un.h:  Rename to tm-68k-fp.h.
	* tm-spc-un.h:  Rename to tm-spc-em.h.
	* tm-sun4sol2.h: Cleanup.
	* configure.in (m68k-*, sparc-* targets):  Corresponding changes.

Sat Mar 13 14:58:22 1993  John Gilmore  (gnu@cygnus.com)

	* symmisc.c (std_in, std_out, std_err):  Move initializations
	to runtime code, in case they aren't constant.

Fri Mar 12 16:23:54 1993  K. Richard Pixley  (rich@cygnus.com)

	* symtab.c (find_pc_symtab): some object file formats, notably
	  mips, have holes in the address ranges of symtabs.  Change
	  this algorithm from first hit to tightest fit.

	* mips-tdep.c (heuristic_proc_start): if we walk the pc into the
	  fence post without finding the enclosing function, then print a
	  warning.

Thu Mar 11 09:33:01 1993  Fred Fish  (fnf@cygnus.com)

	* utils.c (fputs_demangled, fprint_symbol):  Remove.
	* utils.c (fprintf_symbol_filtered):  New function which combines
	the functionality of fputs_demangled and fprint_symbol.  Uses a
	caller provided language parameter to select the appropriate 
	demangler, and caller provided args to pass to the demangler.
	* defs.h (enum language):  Move further up in file so enum can
	be used in prototypes.
	* defs.h (fputs_demangled, fprint_symbol):  Remove prototypes.
	* defs.h (fprintf_symbol_filtered):  Add prototype.
	* c-typeprint.c (cp_type_print_method_args):  Replace calls to
	fputs_demangled with call to fprintf_symbol_filtered.
	* cp-valprint.c (demangle.h):  Include
	* cp-valprint.c (cp_print_value_fields):  Replace calls to
	fprint_symbol with calls to fprintf_symbol_filtered.
	* printcmd.c (print_frame_args):  Replace call to fprint_symbol
	with call to fprintf_symbol_filtered.
	* stack.c (print_frame_info):  Remove obsolete code so we don't
	have to update fputs_demangled usage in it.
	* stack.c (print_frame_info, frame_info):  Add language variable
	to pass to fprintf_symbol_demangled and initialize it from the
	symbol's language.  Replace calls to fputs_demangled with calls
	to fprintf_symbol_filtered.
	* symtab.c (find_methods):  Replace call to fputs_demangled with
	call to fprintf_symbol_filtered.
	* ch-valprint.c (demangle.h):  Include.
	* ch-valprint.c (chill_print_value_fields):  Replace call to
	fprint_symbol with call to new fprintf_symbol_filtered.

Wed Mar 10 17:37:11 1993  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (VERSION):  Bump version to 4.8.2.

	* main.c (source_command):  Require an explicit pathname of file
	to source, since previous behavior of defaulting to gdb init file
	was troublesome and undocumented.
	* printcmd.c (disassemble_command):  Add missing '{}' pair to
	else with two statements.  Bug reported by Stephane Tsacas
	<slt@isoft.fr>.
	* symtab.c (find_pc_line):  Don't complain about zero length or
	negative length line numbers for the moment, since we may not own
	the terminal when called, such as when single stepping.  (FIXME)
	* language.h (CAST_IS_CONVERSION):  True if current language is
	C++ as well as C.  Fix from Peter Schauer.
	* environ.c (get_in_environ, set_in_environ, unset_in_environ):
	Use STREQN macro rather than bare '!strncmp()'.
	* environ.c (unset_in_environ):  Avoid use of memcpy on
	overlapping memory regions, as suggested by Paul Eggert
	<eggert@twinsun.com>.
	* c-exp.y (%union struct):  Remove unused ulval as suggested
	by Paul Eggert <eggert@twinsun.com>.

Mon Mar  8 19:03:06 1993  Fred Fish  (fnf@cygnus.com)

	* main.c (gdbinit):  Make static.
	* main.c (inhibit_gdbinit):  Move to file scope.
	* main.c (main):  Remove local inhibit_gdbinit.
	* main.c (source_command):  Don't source '.gdbinit' file by
	default if gdb has been told to ignore it.

Sun Mar  7 21:58:53 1993  Ian Lance Taylor  (ian@cygnus.com)

	* Makefile.in (MAKEOVERRIDES): Define to be empty for GNU Make
	3.63.

Fri Mar  5 17:39:45 1993  John Gilmore  (gnu@cacophony.cygnus.com)

	* printcmd.c (print_address_symbolic):  Only print if offset
	is shorter than max_symbolic_offset.
	(initialize_printcmd):  `set print max-symbolic-offset'.

	* am29k-tdep.c (TAGWORD_ZERO_MASK):  New #define.
	(examine_tag):  Use it.
	(read_register_stack):  Only look in the local registers for a
	memory address if it's between rfb and rsp; go to memory otherwise.
	(initialize_29k):  Fix call_scratch_address doc.  Remove reginv_com.
	(reginv_com):  Remove ancient kludge command.

Fri Mar  5 17:16:26 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* tm-irix3.h (ZERO_REGNUM): copy this macro from tm-mips.h so that
	  irix4 will again compile.

	* tm-mips.h (GDB_TARGET_IS_MIPS): no longer used, now removed.

	* configure.in: accept mips-sgi-irix4* for irix4.

Fri Mar  5 07:49:48 1993  Steve Chamberlain  (sac@lisa.cygnus.com)

	* z8k-tdep.c (print_register_hook): Lint.

Thu Mar  4 17:42:03 1993  John Gilmore  (gnu@cygnus.com)

	Lint fixes from Paul Eggert (eggert@twinsun.com):

	* command.c (do_setshow_command):  var_uintegers are unsigned.
	* sparc-tdep.c (save_insn_opcodes, restore_insn_opcodes): 
	unsigned, since they use hex values with the high bit set.

Thu Mar  4 08:22:55 1993  Fred Fish  (fnf@cygnus.com)

	Fixes submitted by Karl Berry (karl@nermal.hq.ileaf.com):
	* m88k-pinsn.c (sprint_address):  Use SYMBOL_NAME macro to
	access symbol name.  
	* m88k-nat-c (SXIP_OFFSET, SNIP_OFFSET, SFIP_OFFSET):  Enclose
	macro definitions in parenthesis.

	* dbxread.c (dbx_symfile_init):  Catch the case where there is
	no string table, but the only way we find out is by reading zero
	bytes from EOF.

Wed Mar  3 15:51:28 1993  Fred Fish  (fnf@cygnus.com)

	* dbxread.c (dbx_symfile_init):  Make size of the string table
	size field a define (DBX_STRINGTAB_SIZE_SIZE).  Ensure that the
	offset to the string table is nonzero and handle the nonexistant
	string table case, should it occur.  Ensure that the string table
	size read from the file is reasonable, with a minimum lower bound
	of DBX_STRINGTAB_SIZE_SIZE instead of zero.

Wed Mar  3 07:23:03 1993  Ian Lance Taylor  (ian@cygnus.com)

	* Makefile.in: Changes to build testsuite correctly.
	(FLAGS_TO_PASS): Added CXX and CXXFLAGS.
	(CC_FOR_TARGET, CXX, CXX_FOR_TARGET): New variables.
	(TARGET_FLAGS_TO_PASS): New variable.
	(SUBDIRS): Added testsuite.
	(all): Build testsuite using TARGET_FLAGS_TO_PASS, so that
	testsuite is compiled with CC_FOR_TARGET rather than CC.

Tue Mar  2 17:57:56 1993  Fred Fish  (fnf@cygnus.com)

	* dbxread.c (dbx_symfile_init):  Fix for nonexistant string table,
	reported by mycroft@gnu.ai.mit.edu.

	(Ultrix 2.2 support from Michael Rendell <michael@mercury.cs.mun.ca>)
	* configure.in (vax-*-ultrix2*):  New triplet.
	* config/vaxult2.mh:  New file.
	* xm-vaxult2.h:  New file.

	* c-exp.y (parse_number):  Change high_bit to unsigned.
	* demangle.c:  Change all references to cfront to ARM, since the
	actual algorithm is the one specified in the Annotated Reference
	Manual.  This was confusing users into thinking that full cfront
	support was implemented.
	* dwarfread.c (CFRONT_PRODUCER):  Remove, was never really used.
	* eval.c (evaluate_subexp):  For STRUCTOP_PTR pass the arg type
	directly to lookup_struct_elt_type, which will do the
	dereferencing itself.
	* gdbtypes.c (lookup_struct_elt_type):  Expand comments.  Fix
	NULL dereferencing bug for unnamed structs, comment out
	questionable code.
	
Mon Mar  1 17:54:41 1993  John Gilmore  (gnu@cygnus.com)

	* coffread.c (process_coff_symbol):  Change PCC argument correction
	so that it only happens on big-endian targets; so that it only
	happens if the short or char argument is aligned on an int
	boundary; and so that it changes the location, rather than the
	type, of the argument.  These changes tend to parallel similar
	(old) changes in stabsread.c.

	* coffread.c (coff_read_enum_type):  Use the specified size for
	enums, don't assume that they are int-sized.

	* c-valprint.c (c_val_print):  Don't assume enums are the same as
	ints.

	* coredep.c:  Handle NO_PTRACE_H in coredep.c.  Fix by Michael
	Rendell, <michael@mercury.cs.mun.ca>.

Mon Mar  1 09:25:57 1993  Fred Fish  (fnf@cygnus.com)

	* language.h (local_decimal_format_custom):  Add prototype.
	* language.c (local_decimal_format_custom):  Add function, bug
	reported by Robert R. Henry (rrh@tera.com).

Fri Feb 26 18:33:18 1993  John Gilmore  (gnu@cacophony.cygnus.com)

	* xcoffexec.c (vmap_ldinfo):  Fix "/" for '/' typo, reported
	by Josef Leherbauer, joe@takeFive.co.at.

Wed Feb 24 19:17:11 1993  John Gilmore  (gnu@cacophony.cygnus.com)

	* symfile.c (syms_from_objfile), tm-29k.h, tm-3b1.h, tm-68k-un.h,
	tm-altos.h, tm-arm.h, tm-convex.h, tm-es1800.h, tm-h8300.h,
	tm-hp300bsd.h, tm-hp300hpux.h, tm-hppa.h, tm-i386bsd.h,
	tm-i386v.h, tm-i960.h, tm-irix3.h, tm-isi.h, tm-linux.h,
	tm-m88k.h, tm-merlin.h, tm-mips.h, tm-news.h, tm-np1.h, tm-pn.h,
	tm-pyr.h, tm-rs6000.h, tm-spc-un.h, tm-sun386.h, tm-sunos.h,
	tm-symmetry.h, tm-sysv4.h, tm-tahoe.h, tm-umax.h, tm-vax.h,
	tm-vx68.h, tm-z8k.h:  Remove remnants of NAMES_HAVE_UNDERSCORE.

Wed Feb 24 07:41:15 1993  Fred Fish  (fnf@cygnus.com)

	* symtab.h (SYMBOL_INIT_DEMANGLED_NAME):  Initialize contents
	of demangled name fields to NULL if no demangling exists for
	a symbol.  SYMBOL_INIT_LANGUAGE_SPECIFIC does this for new
	symbols if their language is known at the time they are created,
	but sometimes the language is not known until later.

	* ch-typeprint.c (chill_print_type_base):  Name changed to
	chill_type_print_base to match pattern for C and C++ names.
	* ch-typeprint.c (chill_print_type):  Change "char" to "CHAR"
	to be consistent with other usages.
	* ch-typeprint.c (chill_type_print_base):  Add support for
	printing Chill STRUCT types.
	* ch-valprint.c:  Include values.h.
	* ch-valprint.c (chill_print_value_fields):  New function and
	prototype for printing Chill STRUCT values.
	* ch-valprint.c (chill_val_print):  Fix call to val_print_string
	that was being called with two args instead of three.
	* ch-valprint.c (chill_val_print):  Call chill_print_value_fields
	to print Chill STRUCT values.

Tue Feb 23 18:58:11 1993  Mike Werner  (mtw@poseidon.cygnus.com)

	* configure.in: added testsuite to configdirs.

Tue Feb 23 11:46:11 1993  Mike Stump  (mrs@cygnus.com)

	* doc/stabs.texi: The `this' pointer is now known by the name
	`this' instead of `$t'.

Tue Feb 23 11:21:33 1993  Fred Fish  (fnf@cygnus.com)

	* dwarfread.c (read_tag_string_type):  Rewrite to allow forward
	references of TAG_string_type DIEs in user defined types.
	* ch-lang.c (chill_create_fundamental_type):  Track compiler
	change that now emits debugging info with the type long for Chill
	longs.

Mon Feb 22 15:21:54 1993  Ian Lance Taylor  (ian@cygnus.com)

	* remote-mips.c: New file; implements MIPS remote debugging
	protocol.
	* config/idt.mt: New file; uses remote-mips.c
	* configure.in (mips-idt-ecoff): New target; uses idt.mt.

	* mips-tdep.c (mips_fpu): New variable; controls use of MIPS
	floating point coprocessor.
	(mips_push_dummy_frame): If not mips_fpu, don't save floating
	point registers.
	(mips_pop_frame): If not mips_fpu, don't restore floating point
	registers.
	(_initialize_mips_tdep): New function; let the user reset mips_fpu
	variable.
	* tm-mips.h (EXTRACT_RETURN_VALUE, STORE_RETURN_VALUE): If not
	mips_fpu, don't use fp0 as floating point return register.
	(FIX_CALL_DUMMY): If not mips_fpu, don't save floating point
	registers.

Mon Feb 22 07:54:03 1993  Mike Werner  (mtw@poseidon.cygnus.com)

        * gdb/testsuite: made modifications to testcases, etc., to allow
        them to work properly  given the reorganization of deja-gnu and the
        relocation of the testcases from deja-gnu to a "tool" subdirectory.

Sun Feb 21 10:55:55 1993  Mike Werner  (mtw@poseidon.cygnus.com)

	* gdb/testsuite: Initial creation of gdb/testsuite.
	Migrated dejagnu testcases and support files for testing nm to
	gdb/testsuite from deja-gnu.  These files were moved "as is"
	with no modifications.	This migration is part of a major overhaul
	of dejagnu.  The modifications to these testcases, etc., which
	will allow them to work with the new version of dejagnu will be
	made in a future update.

Fri Feb 19 18:36:55 1993  John Gilmore  (gnu@cygnus.com)

	* NEWS:  Add reminders for next release.

Fri Feb 19 10:01:39 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mipsread.c (parse_lines): Correct check for files compiled with
	-g1.

Fri Feb 19 05:56:15 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (VERSION):  4.8.1 to distinguish local versions.

Fri Feb 19 01:32:58 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (VERSION):  GDB-4.8 release!
	* README, NEWS:  Update for release.

Thu Feb 18 22:44:40 1993  Stu Grossman  (grossman@cygnus.com)

	* am29k-pinsn.c (print_insn):  Minor nits with const.
	* am29k-tdep.c:  More minor nits with arg types for
	supply_register, NULL vs. 0, read_register_gen, & reginv_com.

Thu Feb 18 22:38:03 1993  John Gilmore  (gnu@cygnus.com)

	* gcc.patch:  Update for a different GCC (G++) bug.
	* main.c (print_gdb_version):  Update copyright year to 1993.
	* nm-hp300bsd.h:  Decide whether this is BSD 4.3 or 4.4,
	conditionalize this file on it.  FIXME, right way is to split
	these into two config files.  
	(ATTACH_DETACH):  Define for BSD 4.4
	(PTRACE_ARG_TYPE):  caddr_t for BSD 4.4, unset for 4.3.
	(U_REGS_OFFSET):  Revise for 4.4.
	(REGISTER_U_ADDR):  Separate for 4.4, but it doesn't work yet.
	* xm-hp300bsd.h:  Move definitions of UINT_MAX, INT_MAX, INT_MIN,
	LONG_MAX into this file to avoid cpp "redefinition" warnings.

Thu Feb 18 16:13:28 1993  K. Richard Pixley  (rich@rtl.cygnus.com)

	* nm-hp300bsd.h (PTRACE_ARG3_TYPE): FSF's hp300's have int* not
	  caddr_t.

Thu Feb 18 04:10:06 1993  John Gilmore  (gnu@cygnus.com)

	* c-lang.c (c_printstr):  Bugfix for length==0 case.

	* c-lang.c (c_printstr):  If a C string ends in a null, don't
	print the null.

Thu Feb 18 02:39:21 1993  Stu Grossman  (grossman at cygnus.com)

	* defs.h (STRCMP):  Make it work for unsigned chars.

Thu Feb 18 01:56:06 1993  John Gilmore  (gnu@cygnus.com)

	* nm-hp300bsd.h (ATTACH_DETACH, PTRACE_ATTACH, PTRACE_DETACH): define.
	* config/hp300bsd.mh (REGEX, REGEX1):  Define.
	* m68k-pinsn.c (BREAK_UP_BIG_DECL, AND_OTHER_PART):  #if __GNUC__,
	define to kludge the large opcode table into two smaller tables,
	since GCC take exponential space to build the table.  Lint.
	(NOPCODES):  Remove, use "numopcodes" from opcode/m68k.h instead.

Wed Feb 17 19:24:40 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (VERSION):  Roll to 4.7.9.
	* xm-hp300bsd.h:  Define PSIGNAL_IN_SIGNAL_H and put a compatible
	definition here, to handle both BSD 4.3 and 4.4 systems.
	* mipsread.c (ZMAGIC):  #undef to avoid duplicate define.
	* remote.c (alarm):  Move declaration to global level, before 
	first reference to it.
	* tm-i386bsd.h (NUM_REGS):  There are only eleven, not twelve.
	* dbxread.c (process_one_symbol):  Cast to unsigned char, not int.

Wed Feb 17 13:40:29 1993  K. Richard Pixley  (rich@cygnus.com)

	* remote.c (readchar): forward declare alarm which otherwise looks
	  like an undeclared variable to gcc.

	* dbxread.c (process_one_symbol): cast enum value N_SO into int
	  when comparing against an int.  Avoids superfluous warning from
	  vax ultrix 4.2 cc.

	* inflow.c (set_sigint_trap): add cast to assignment from signal.
	  Avoids superfluous warnings from some systems and/or compilers
	  (like vax ultrix 4.2.)

	* language.c (struct op_print unk_op_print_tab): use the enum
	  values rather naked zeros as initializers.  Avoids warnings from
	  ultrix type compilers.

Tue Feb 16 00:53:20 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (VERSION):  Roll to 4.7.6.
	(SFILES_SUBDIR):  Add 29k-share/udi_soc.
	(SFILES_SUBSUBDIR):  Move 29k-share/udi files to this macro.
	(alldeps.mak):  Make ALLDEPFILES_SUBSUBDIR for files in sub sub dirs.
	(ALLDEPFILES_SUBSUBDIR):  Depend on this for deeper dep files.
	(HFILES):  Remove all nm-* except nm-trash.h.  Add ns32k-opcode.h.
	(depend):  Fix bug where nm-files in config files weren't noticed.
	(make-proto-gdb-1):  Avoid changing directories while building new
	prototype.  Build SFILES_SUBSUBDIR with longer symlinks.

Mon Feb 15 20:48:09 1993  John Gilmore  (gnu@cygnus.com)

	* remote.c:  Improve error recovery.  Allow user to break out
	of initial connection attempt with INTERRUPT.  Treat a timeout
	while waiting for remote packet like a retry, unless the remote
	side is actively running user code.  Fix a few long printf_filtered's.

	* xcoffread.c (read_xcoff_symtab):  Don't use null symbol name for
	trampoline symbols.

	* buildsym.c (start_subfile):  Allow null file name.

Fri Feb 12 15:46:49 1993  K. Richard Pixley  (rich@cygnus.com)

	* xcoffread.c (process_xcoff_symbol, read_symbol_lineno): complain
	  expects a pointer to complaint rather than a complaint
	  structure.
	  (process_linenos): free the previously allocated subfile name,
	  then allocate the new one from the heap.

Fri Feb 12 08:06:05 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* h8300-tdep.c, tm-h8300.h: turn off some experimental features

Thu Feb 11 00:59:07 1993  John Gilmore  (gnu@cygnus.com)

	* stabsread.c (dbx_lookup_type):  Handle negative type numbers.
	Previously, would bogusly index off the bottom of type_vector.
	(rs6000_builtin_type):  Accept type number as argument.
	(read_type, case '-'):  Handle negatives like any other type number.

	* symfile.c (deduce_language_from_filename):  Handle null name.

	* mips-tdep.c (isa_NAN):  Fix byte order dependency.
	Reported by Nobuyuki Hikichi <hikichi@sra.co.jp>,
	fixed by sato@sm.sony.co.jp.

	* xcoffread.c (parmsym):  Don't use an initializer to set up
	this struct symbol.  Set it up in initialize_xcoffread.
	(read_xcoff_symtab, xcoff_symfile_read):  Surround code that only
	works on real rs/6000 target with #ifndef FAKING_RS6000.

Wed Feb 10 23:42:37 1993  John Gilmore  (gnu@cygnus.com)

	* stabsread.c (rs6000_builtin_type):  Move function from
	xcoffread.c:builtin_type.
	* xcoffread.c (builtin_type):  Move to stabsread.  Remove
	IBM6000_HOST dependency.  Move misplaced comments.
	(various):  Change printf's to complaints.
	(patch_block_stabs, process_xcoff_symbol case C_DECL):  Add
	objfile argument to read_type calls under #if 0.
	(process_xcoff_symbol case C_RSYM):  Fix typo in #ifdef.
	* xcoffexec.c (map_vmap):  Don't allocate an objfile for the exec_file.
	* Makefile.in:  xcoffread.o is not built by default.
	* xm-rs6000.h (IBM6000_HOST):  Remove.
	* config/rs6000.mh (NATDEPFILES): xcoffread.o is native only.
	* doc/gdbint.texinfo:  Eliminate IBM6000_HOST, document
	IBM6000_TARGET.

Wed Feb 10 18:31:20 1993  Stu Grossman  (grossman at cygnus.com)

	* findvar.c (read_var_value):  If REG_STRUCT_HAS_ADDR, then set
	VALUE_LVAL to be lval_memory so that we don't try to modify wild
	register numbers when user tries to modify elements in structs
	passed as arguments.
	* inflow.c (child_terminal_info):  Move banner outside of system
	specific #ifdefs.
	* tm-hppa.h (REG_STRUCT_HAS_ADDR):  Define this for HPPA, which
	passes struct/union arguments by address.

Wed Feb 10 15:34:46 1993  Ian Lance Taylor  (ian@cygnus.com)

	* Based on patch from Kean Johnston <maw@netcom.com>:
	* nm-i386sco4.h: New file.  Like nm-i386sco.h, but define
	ATTACH_DETACH, PTRACE_ATTACH and PTRACE_DETACH.
	* config/i386sco4.mh (NAT_FILE): Use nm-i386sco4.h.

Tue Feb  9 20:07:18 1993  John Gilmore  (gnu@cygnus.com)

	* remote-udi.c (FREEZE_MODE):  Fix && for & typo.  Found and
	fixed by Lynn D. Shumaker, shumaker@saifr00.cfsat.honeywell.com.

Tue Feb  9 08:18:07 1993  Ian Lance Taylor  (ian@cygnus.com)

	* config/i386sco4.mh (MUNCH_DEFINE): Pass -p to nm to avoid bug in
	cc debugging output.

Tue Feb  9 00:19:28 1993  John Gilmore  (gnu@cygnus.com)

	* stabsread.c (define_symbol):  Complain about unrecognized names
	that begin with CPLUS_MARKER (often '$'), but don't die.  Fix
	suggested by gb@cs.purdue.edu (Gerald Baumgartner).
	(read_cpp_abbrev):  Don't use the class name as part of the
	vtable pointer member name (_vptr$) in $vf abbrevs or unrecognized
	abbrevs.  Inspired by Mike Tiemann.
	(read_tilde_fields):  Comment.  Remove ancient dead code.
	Remove erroneous but non-dead code.  Simplify.  Add complaints.
	(in general):  Remove extraneous (parentheses) in return
	statements.

Fri Feb  5 14:01:22 1993  John Gilmore  (gnu@cygnus.com)

	* coffread.c (coff_lookup_type):  Fix fencepost error reported
	by Art Berggreen, <arg@opal.acc.com>.

	Fix long file name bug reported on SCO Open Desktop 2.0 by Ulf Lunde
	<Ulf.Lunde@kvatro.no> and Dag H. Wanvik <Dag.H.Wanvik@kvatro.no>:
	  
	* coffread.c (getfilename):  Eliminate COFF_NO_LONG_FILE_NAMES
	test, which is apparently left over from when we used native
	include files and couldn't depend on the member names being there.
	* tm-3b1.h, tm-altos.h, tm-i386v.h:  Don't set it.

Thu Feb  4 12:23:15 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mipsread.c: Major overhaul to use new BFD symbol table reading
	routines.  Now swaps information as it is needed, rather than
	swapping everything when the file is read.

Thu Feb  4 01:52:36 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (TARDIRS):  Add sparclite demo dir.
	(*.tab.c):  Change dependency on Makefile to depend on
	Makefile.in, otherwise it always rebuilds after configuring.
	Force output *.tab.c file into current directory even in "make"
	versions that rewrite dependent file names used in command lines.

	* TODO:  Remove some things we did.
	* am29k-opcode.h, convx-opcode:  Remove; now in ../include/opcode.
	* os68k-xdep.c:  Remove; useless file (os68k is a target only).
	* convex-pinsn.c:  Use ../include/opcode/convex.h.  Add CONST.
	* symtab.h:  Eliminate unnamed unions and structs.

Wed Feb  3 14:48:08 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in (VERSION):  Roll to 4.7.5.

Tue Feb  2 20:47:42 1993  John Gilmore  (gnu@cygnus.com)

	* breakpoint.c (breakpoint_re_set_one):  Handle watchpoints when
	re-evaluating symbol pointers.

Tue Feb  2 16:10:31 1993  Fred Fish  (fnf@cygnus.com)

	* c-exp.y (lcurly, rcurly):  New nonterminals.
	* c-exp.y (exp):  Use lcurly and rcurly for arrays and UNOP_MEMVAL
	constructs.
	* parse.c (free_funcalls):  Moved prototype from parser-defs.h,
	made function static.
	* parse.c (struct funcall):  Moved struct def from parser-defs.h.
	* parse.c (funcall_chain):  Moved from parser-defs.h, made static.
	* parse.c (start_arglist):  
	* parser-defs.h (free_funcalls):  Moved prototype to parse.c.
	* parser-defs.h (struct funcall):  Moved struct def to parse.c.
	* parser-defs.h (funcall_chain):  Moved to parse.c.
	* printcmd.c (print_frame_nameless_args): Fix prototype.
	* tm-mips.h (setup_arbitrary_frame):  Fix prototype.
	* tm-sparc.h (setup_arbitrary_frame):  Fix prototype.
	* valops.c (typecmp):  Moved prototype from values.h.
	* value.h (typecmp):  Moved prototype to valops.c, made static.
	* ch-exp.y (yylex):  Change way control sequences are disabled.
	
Tue Feb  2 16:11:43 1993  John Gilmore  (gnu@cygnus.com)

	* tm-mips.h, tm-sparc.h:  Fix thinko in SETUP_ARBITRARY_FRAME.

Tue Feb  2 15:30:33 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mipsread.c (upgrade_type): Build array types correctly, using
	create_range_type and create_array_type.

Tue Feb  2 00:19:08 1993  John Gilmore  (gnu@cygnus.com)

	* remote-nindy.c:  Cleanup.

	* infrun.c (wait_for_inferior):  When rolling back the PC after
	a breakpoint, call write_pc so that NPC gets rolled back as well
	(for the 29K).

	* blockframe.c (inside_entry_file, inside_main_func,
	inside_entry_func):  PC of zero is always "bottom of stack".

	* printcmd.c (print_frame_args, print_frame_nameless_args):
	Let print_frame_nameless_args decide whether there are any,
	laying groundwork for possibly later printing 29K args for
	functions where we have tag words but no symbols.	

Mon Feb  1 18:09:58 1993  Roland H. Pesch  (pesch@fowanton.cygnus.com)

	* Makefile.in: fix GDB doc targets for new doc subdir structure

Mon Feb  1 17:56:47 1993  John Gilmore  (gnu@cygnus.com)

	* stack.c (parse_frame_specification):  Parse as many arguments
	as there are (up to MAXARGS).  Pass all of them in argc, argv
	format to SETUP_ARBITRARY_FRAME.  Put the burden of checking how
	many there were, onto SETUP_ARBITRARY_FRAME.
	* tm-mips.h, tm-sparc.h:  Corresponding changes.
	* mips-tdep.c, sparc-tdep.c:  Ditto.

Mon Feb  1 17:19:37 1993  John Gilmore  (gnu@cygnus.com)

	* hp300ux-nat.c:  Update copyrights.
	* mipsread.c (parse_partial_symbols):  Complain about block
	indexes that go backwards.  Fix from Peter Schauer.
	* symfile.c (syms_from_objfile, symbol_file_add):  Allow a
	symbol-file that has no linkage symbols to be read.
	* tm-rs6000.h, xm-rs6000.h: (SIGWINCH_HANDLER and friends):  Move
	from tm- file to xm-file, since they're host dependent.
	* valarith.c (value_binop):  Typo.

Mon Feb  1 16:16:59 1993  Stu Grossman  (grossman at cygnus.com)

	* sparclite/aload.c:  Add copyleft.
	* sparclite/crt0.s:  Add comment at beginning.

Mon Feb  1 14:36:11 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* remote-z8k.c, z8k-tdep.c: support for the Z8001 and Z8002.
	* parse.c (std_regs): Only declare if NO_STD_REGS is defined.

Sun Jan 31 04:32:48 1993  Michael Tiemann  (tiemann@rtl.cygnus.com)

	* values.c (value_headof): Fix typo in which VTBL and ARG were
	being confused for one another.

	* valops.c (typecmp): Now static.

	* gdbtypes.c (fill_in_vptr_fieldno): Don't ignore the first
	baseclass--we don't always inherit its virtual function table
	pointer.

	* eval.c (evaluate_subexp): In OP_FUNCALL case, adjust `this'
	pointer correctly in case value_struct_elt moves it around.

	* valops.c (typecmp): Now static.  Also, now groks references
	better.

	* gdbtypes.c (lookup_struct_elt_type): Pass NOERR instead of
	zero on recursive call.  If NAME is the name of TYPE, return TYPE.

Sat Jan 30 19:55:52 1993  John Gilmore  (gnu@cygnus.com)

	* hppah-nat.c:  Eliminate <sys/user.h> and other unnecessary stuff,
	to avoid "too much defining" error from native C compiler (!).

	* Makefile.in (HFILES):  Add typeprint.h.
	* typeprint.[ch]:  Update copyrights.

Thu Jan 28 19:09:02 1993  John Gilmore  (gnu@cygnus.com)

	* Makefile.in:  Update to match doc/ subdir changes.

	* config/hp300hpux.mh:  No cross-host file needed, just native.
	* config/go32.mh:  Remove nonexistent "native" support.

	M88K fixes reported by Carl Greco, <cgreco@Creighton.Edu>:
	* tm-m88k.h (REGISTER_CONVERT_TO_RAW):  Fix typo.
	* m88k-tdep.c (next_insn):  Lint, cleanup.
	(store_parm_word):  Lint.

	* README:  Fix typo (reported by karl@hq.ileaf.com).

Wed Jan 27 21:34:21 1993  Fred Fish  (fnf@cygnus.com)

	* expression.h (BINOP_CONCAT): Document use for self concatenation
	an integral number of times.
	* language.c (binop_type_check):  Extend BINOP_CONCAT for self
	concatenation case.
	* valarith.c (value_concat):  Rewrite to support self
	concatenation an integral number of times.
	* Makefile.in (ch-exp.tab.c):  Change "expect" message.
	* ch-exp.y (FIXME's):  Make all FIXME tokens distinct, to
	eliminate hundreds of spurious shift/reduce and reduce/reduce
	conflicts that mask the 5 real ones.
	* ch-exp.y (STRING, CONSTANT, SC):  Remove unused tokens.
	* ch-exp.y (integer_literal_expression):  Remove production,
	no longer used.

Thu Jan 21 09:58:36 1993  Fred Fish  (fnf@cygnus.com)

	* eval.c (evaluate_subexp):  Fix OP_ARRAY, remove code that
	implied that "no side effects" was nonfunctional.
	* eval.c (evaluate_subexp):  Add BINOP_CONCAT case to deal with
	character string and bitstring concatenation.
	* expprint.c (dump_expression):  Add case for BINOP_CONCAT.
	* expression.h (exp_opcode):  Add BINOP_CONCAT.
	* gdbtypes.h (type_code):  Add TYPE_CODE_BITSTRING.
	* language.c (string_type):  Add function to determine if a type
	is a string type.
	* language.c (binop_type_check):  Add case for BINOP_CONCAT.
	* valarith.c (value_concat):  New function to concatenate two
	values, such as character strings or bitstrings.
	* valops.c (value_string):  Remove error stub and implement
	function body.
	* value.h (value_concat):  Add prototype.
	* ch-exp.y (operand_3):  Add actions for SLASH_SLASH (//).
	* ch-exp.y (yylex):  Recognize SLASH_SLASH.
	* ch-lang.c (chill_op_print_tab):  Add SLASH_SLASH (//) as
	BINOP_CONCAT.

Tue Jan 19 14:26:15 1993  Fred Fish  (fnf@cygnus.com)

	* c-exp.y (exp):  Add production to support direct creation
	of array constants using the obvious syntax.
	* c-valprint.c (c_val_print):  Set printed string length.
	* dwarfread.c (read_tag_string_type):  New prototype and
	function that handles TAG_string_type DIEs.
	* dwarfread.c (process_dies):  Add case for TAG_string_type
	that calls new read_tag_string_type function.
	* expprint.c (print_subexp):  Add support for OP_ARRAY.
	* gdbtypes.c (create_range_type, create_array_type):  Inherit
	objfile from the index type.
	* ch-typeprint.c (chill_print_type):  Add case for
	TYPE_CODE_STRING.
	* ch-valprint.c (chill_val_print):  Fix case for
	TYPE_CODE_STRING.

Mon Jan 18 11:58:45 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mipsread.c (CODE_MASK, MIPS_IS_STAB, MIPS_MARK_STAB,
	MIPS_UNMARK_STAB, STABS_SYMBOLS): Removed; now in
	include/coff/mips.h.

Fri Jan 15 20:26:50 1993  Fred Fish  (fnf@cygnus.com)

	* c-exp.y (exp:STRING):  Convert C strings into array-of-char
	constants with an explicit null byte terminator.  OP_STRING is
	now used for real string types.
	* c-lang.c (builtin_type_*):  Move declarations to lang.c since
	they are used by all languages.
	* c-lang.c (_initialize_c_language):  Move initializations of 
	builtin_type_* to lang.c.
	* c-typeprint.c (c_type_print_varspec_prefix,
	c_type_print_varspec_suffix):  TYPE_CODE_PASCAL_ARRAY renamed
	to TYPE_CODE_STRING.
	* c-valprint.c (c_val_print):  Change the way character arrays
	are printed as strings to be consistent with the way strings
	are printed when pointer-to-char types are dereferenced.
	Remove test of print_max before calling val_print_string, which
	now does it's own test.
	* eval.c (evaluate_subexp):  Add case for OP_ARRAY.
	* expprint.c (print_subexp, dump_expression):  Add case for OP_ARRAY.
	* expression.h (enum exp_opcode):  Add OP_ARRAY and document.
	* gdbtypes.c (builtin_type_*):  Add declarations moved from
	c-lang.c.
	* gdbtypes.c (create_string_type):  New function to create real
	string types.
	* gdbtypes.c (recursive_dump_type):  TYPE_CODE_PASCAL_ARRAY
	renamed to TYPE_CODE_STRING.
	* gdbtypes.c (_initialize_gdbtypes):  Add initializations of
	builtin_type_* types moved from c-lang.c.
	* gdbtypes.h (enum type_code):  TYPE_CODE_PASCAL_ARRAY renamed
	to TYPE_CODE_STRING.
	* gdbtypes.h (builtin_type_string):  Add extern declaration.
	* gdbtypes.h (create_string_type):  Add prototype.
	* m2-lang.c (m2_create_fundamental_type):  TYPE_CODE_PASCAL_ARRAY
	renamed to TYPE_CODE_STRING.
	* m88k-tdep.c (pushed_size):  TYPE_CODE_PASCAL_ARRAY renamed to
	TYPE_CODE_STRING.
	* mipsread.c (_initialize_mipsread):  TYPE_CODE_PASCAL_ARRAY
	renamed to TYPE_CODE_STRING.
	* parse.c (length_of_subexp, prefixify_subexp):  Add case for
	OP_ARRAY.
	* printcmd.c (print_formatted):  Recognize TYPE_CODE_STRING.
	* typeprint.c (print_type_scalar):  TYPE_CODE_PASCAL_ARRAY renamed
	to TYPE_CODE_STRING.
	* valops.c (allocate_space_in_inferior):  New function and
	prototype, using code ripped out of value_string.
	* valops.c (value_string):  Rewritten to use new function
	allocate_space_in_inferior, but temporarily disabled until some
	other support is in place.
	* valops.c (value_array):  New function to create array constants.
	* valprint.c (val_print_string):  Add comment to document use, 
	complete rewrite to fix several small buglets.
	* value.h (value_array):  Add prototype.
	* value.h (val_print_string):  Change prototype to match rewrite.
	* ch-valprint.c (chill_val_print):  Add case for TYPE_CODE_STRING.
	* ch-exp.y (match_character_literal):  Disable recognition of 
	control sequence form of character literals and document why.

Thu Jan 14 15:48:12 1993  Stu Grossman  (grossman at cygnus.com)

	* nindy-share/nindy.c:  Add comments to #endif's to clarify
	grouping.

	* hppa-pinsn.c (print_insn):  Use read_memory_integer, instead of
	read_memory to get byte order right.
	* hppah-tdep.c (find_unwind_info):  Don't read in unwind info
	anymore.  This is done in paread.c now.  We expect unwind info
	to hang off of objfiles, and search all of the objfiles when until
	we find a match.
	* (skip_trampoline_code):  Cast arg to target_read_memory.
	* objfiles.h (struct objfile):  Add new field obj_private to hold
	per object file private data (unwind info in this case).
	* paread.c (read_unwind_info):  New routine to read unwind info
	for the objfile.  This data is hung off of obj_private.
	* tm-hppa.h:  Define struct obj_unwind_info, to hold pointers to
	the unwind info for this objfile.  Also define OBJ_UNWIND_INFO to
	make this easier to access.

Wed Jan 13 20:49:59 1993  Fred Fish  (fnf@cygnus.com)

	* c-valprint.c (cp_print_class_member):  Add extern decl.
	* c-valprint.c (c_val_print):  Extract code for printing methods
	and move it to cp_print_class_method in cp-valprint.c.
	* c-valprint.c (c_val_print):  Extract code to print strings and
	move it to val_print_string in valprint.c.
	* cp-valprint.c (cp_print_class_method):  New function using
	code extracted from c_val_print.
	* valprint.c (val_print_string):  New function using code
	extracted from c_val_print.
	* value.h (val_print_string):  Add prototype.
	* ch-exp.y (CHARACTER_STRING_LITERAL):  Set correct token type.
	* ch-exp.y (literal):  Add action for CHARACTER_STRING_LITERAL.
	* ch-exp.y (tempbuf, tempbufsize, tempbufindex, GROWBY_MIN_SIZE,
	CHECKBUF, growbuf_by_size):  New variables, macros, and support
	functions for implementing a dynamically expandable temp buffer.
	* ch-exp.y (match_string_literal):  New lexer function.
	* ch-exp.y (match_bitstring_literal):  Dynamic buffer code
	removed and replaced with new CHECKBUF macro.
	* ch-exp.y (yylex):  Call match_string_literal when appropriate.
	* ch-valprint.c (ch_val_print):  Add code for TYPE_CODE_PTR.

Sat Jan  9 19:59:33 1993  Stu Grossman  (grossman at cygnus.com)

	* Makefile.in:  Add info for paread.o.
	* config/hppahpux.mh:  Add paread.o to NATDEPFILES.

	* blockframe.c (frameless_look_for_prologue):  Correct the
	comment.
	* gdbtypes.h, gdbtypes.c:  Use const in decl of
	cplus_struct_default, now that pa-gas assembler has been fixed.
	* hppah-nat.c:  Formatting.
	* hppah-tdep.c:  Remove lots of useless externs for variables we
	don't use.
	* (find_unwind_entry):  Speed up by using binary search, and a one
	entry cache.
	* (rp_saved):  New routine to see what unwind info says about RP
	being saved on the stack frame.
	* (frame_saved_pc):  Look for prologue to see if we need to
	examine the stack for the saved RP or not.
	* (init_extra_frame_info):  Check for prologue, instead of
	framesize to determine if we are frameless or not.
	* (frame_chain_valid):  Stop backtraces when we run into _start.
	* (push_dummy_frame):  Reformat to make more readable.
	* (find_dummy_frame_regs):  ditto.
	* (hp_pop_frame):  ditto.
	* (hp_restore_pc_queue):  small cleanup.
	* (hp_push_arguments):  ditto.
	* (pa_do_registers_info):  ditto.
	* (skip_prologue):  New routine created from SKIP_PROLOGUE macro.
	* tm-hppa.h:  Move contents of SKIP_PROLOGUE into hppah-tdep.c.
	* Define FRAME_CHAIN_VALID.
	* Turn on BELIEVE_PCC_PROMOTION so that we can access char args
	passed to functions.

	* paread.c (pa_symtab_read):  Use new bfd conventions for
	accessing linker symbol table.
	* (pa_symfile_init):  Access embedded STAB info via BFD section
	mechanism and related macros.


Sat Jan  9 19:31:43 1993  Stu Grossman  (grossman at cygnus.com)

	* sparc-stub.c:  Use a seperate stack for our traps.
	* Handle recursive traps.
	* Remove all trap init code.  This needs to be done by the
	environment.
	* (set_mem_fault_trap):  Call exceptionHandler() to setup this
	trap.
	* (handle_exception):  See if we are at breakinst, if so, then
	advance PC sp that users can just step out of breakpoint().
	* (case 'G'):  Don't let GDB hack CWP.  Also, copy saved regs to
	new place if SP has changed.
	* (case 's'):  Get rid of this, we can't do it yet.
	* (case 't'):  New command to test any old random feature.
	* (case 'r'):  New command to reset the system.
	* (breakpoint):  Add label to breakpoint trap instruction so that
	handle_exception() can detect where we are and get past the
	breakpoint trivially.

Thu Jan  7 13:33:06 1993  Ian Lance Taylor  (ian@cygnus.com)

	* mips-pinsn.c: Actual work now done by opcodes/mips-dis.c.

Thu Jan  7 09:21:51 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* configure.in: recognise all sparclite variants

Wed Jan  6 10:14:51 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* symfile.c: If O_BINARY isn't defined, set it to 0, call openp for
	binary files oring in the right bit.

	* main.c, source.c, state.c, symmisc.c: use macros defined in
	fopen-{bin|both} when fopening files.

Wed Jan  6 08:19:11 1993  Fred Fish  (fnf@cygnus.com)

	* defs.h (HOST_CHAR_BIT):  New macro, defaults to either CHAR_BIT
	from a configuration file (typically including <limits.h>), or to
	TARGET_CHAR_BIT if CHAR_BIT is not defined.
	* eval.c (evaluate_subexp):  Use new BYTES_TO_EXP_ELEM macro.
	* eval.c (evaluate_subexp):  Add case for OP_BITSTRING.
	* expprint.c (print_subexp):  Use new BYTES_TO_EXP_ELEM macro.
	* exppritn.c (print_subexp, dump_expression):  Add case for
	OP_BITSTRING.
	* expression.h (OP_BITSTRING):  New expression element type for
	packed bitstrings.
	* expression.h (EXP_ELEM_TO_BYTES, BYTES_TO_EXP_ELEM):  New
	macros to convert between number of expression elements and bytes
	to store that many elements.
	* i960-tdep.c (leafproc_return):  Use new macros to access
	minimal symbol name and address fields.
	* m88k-pinsn.c (sprint_address):  Use new macros to access
	minimal symbol name and address fields.
	* nindy-tdep.c (nindy_frame_chain_valid):  Use new macro to access
	minimal symbol address field.
	* parse.c (write_exp_elt, write_exp_string, prefixify_expression,
	parse_exp_1):  Use new EXP_ELEM_TO_BYTES macro.
	* parse.c (write_exp_string, length_of_subexp, prefixify_expression):
	Use new BYTES_TO_EXP_ELEM macro.
	* parse.c (write_exp_bitstring):  New function to write packed
	bitstrings into the expression element vector.
	* parse.c (length_of_subexp, prefixify_subexp):  Add case for
	OP_BITSTRING.
	* parser-defs.h (struct stoken):  Document that it is used for
	OP_BITSTRING as well as OP_STRING.
	* parser-defs.h (write_exp_bitstring):  Add prototype.
	* ch-exp.y (BIT_STRING_LITERAL):  Change token type to sval.
	* ch-exp.y (NUM, PRED, SUCC, ABS, CARD, MAX, MIN, SIZE, UPPER,
	LOWER, LENGTH):  New tokens for keywords.
	* ch-exp.y (chill_value_built_in_routine_call, mode_argument, 
	upper_lower_argument, length_argument, array_mode_name,
	string_mode_name, variant_structure_mode_name):  New non-terminals
	and productions.
	* ch-exp.y (literal):  Useful production for BIT_STRING_LITERAL.
	* ch-exp.y (match_bitstring_literal):  New lexer support function
	to recognize bitstring literals.
	* ch-exp.y (tokentab6):  New token table for 6 character keywords.
	* ch-exp.y (tokentab5):  Add LOWER, UPPER.
	* ch-exp.y (tokentab4):  Add PRED, SUCC, CARD, SIZE.
	* ch-exp.y (tokentab3):  Add NUM, ABS, MIN, MAX.
	* ch-exp.y (yylex):  Check tokentab6.
	* ch-exp.y (yylex):  Call match_bitstring_literal.

Mon Jan  4 16:54:18 1993  Fred Fish  (fnf@cygnus.com)

	* xcoffexec.c (vmap_symtab):  Use new macros to access minimal
	symbol name and value fields.

	* c-exp.y (yylex):  Make static, to match prototype and other
	<lang>-exp.y files.

	* expression.h (exp_opcode):  Add BINOP_MOD.
	* eval.c (evaluate_subexp):  Handle new BINOP_MOD.
	* expprint.c (dump_expression):  Handle new BINOP_MOD.
	* language.c (binop_type_check):  Handle new BINOP_MOD.
	* main.c (float_handler):  Re-enable float handler when hit.
	* valarith.c (language.h):  Include, need current_language.
	* valarith.c (TRUNCATION_TOWARDS_ZERO):  Define default macro
	for integer divide truncates towards zero for negative results.
	* valarith.c (value_x_binop):  Handle BINOP_MOD if seen.
	* valarith.c (value_binop):  Allow arithmetic operations on
	TYPE_CODE_CHAR variables.  Add case to handle new BINOP_MOD.
	* ch-exp.y (operand_4):  Add useful actions for MOD and REM.
	* ch-exp.y (tokentab3):  Add MOD and REM.
	* ch-exp.y (yylex):  Set innermost_block for symbols found
	in local scopes.  Return LOCATION_NAME for local symbols.
	* ch-lang.c (chill_op_print_tab):  Fix MOD entry to use
	BINOP_MOD instead of BINOP_REM.  Add REM entry, using BINOP_REM.

Mon Jan  4 07:35:31 1993  Steve Chamberlain  (sac@wahini.cygnus.com)

	* command.c (shell_escape, make_command, _initialize_command):
	don't create or use fork if CANT_FORK is defined.
	* serial.h, ser-go32.c: now compiles, but "the obvious problems of
	code written for the IBM PC" remain.
	* xm-go32.h: define CANT_FORK

Sun Jan  3 14:24:56 1993  Steve Chamberlain  (sac@thepub.cygnus.com)

	* remote-sim.c: first attempt at general simulator interface
	* remote-hms.c: whitespace
	* h8300-tdep.c: (h8300_skip_prologue, examine_prologue):
	understand new stack layout. (print_register_hook): print ccr
	register in a fancy way.

Sun Jan  3 14:16:10 1993  Fred Fish  (fnf@cygnus.com)

	* eval.c (language.h): Include.
	* eval.c (evaluate_subexp_with_coercion):  Only coerce arrays
	to pointer types when the current language is C.  It loses for
	other languages when the lower index bound is nonzero.
	* valarith.c (value_subscript):  Take array lower bounds into
	account when performing subscripting operations.
	* valops.c (value_coerce_array):  Add comment describing why
	arrays with nonzero lower bounds are dealt with in value_subscript,
	rather than in value_coerce_array.

Sat Jan  2 12:16:41 1993  Fred Fish  (fnf@cygnus.com)

	* ch-exp.y (FLOAT_LITERAL):  Add token.
	* ch-exp.y (literal):  Add FLOAT_LITERAL.
	* ch-exp.y (match_float_literal):  New lexer routine.
	* ch-exp.y (convert_float):  Remove.
	* ch-exp.y (yylex):  Call match_float_literal.
	* ch-exp.y (yylex):  Match single '.' after trying
	to match floating point literals.

	* eval.c (evaluate_subexp):  Add case MULTI_SUBSCRIPT.
	* expprint.c (print_subexp):  Rename BINOP_MULTI_SUBSCRIPT to
	MULTI_SUBSCRIPT.
	* expprint.c (dump_expression):  New function for dumping
	expression vectors during gdb debugging.
	* expression.h (BINOP_MULTI_SUBSCRIPT):  Name changed to
	MULTI_SUBSCRIPT and moved out of BINOP range.
	* expression.h (DUMP_EXPRESSION):  New macro that calls
	dump_expression if DEBUG_EXPRESSIONS is defined.
	* m2-exp.y (BINOP_MULTI_SUBSCRIPT):  Changed to MULTI_SUBSCRIPT.
	* parse.c (length_of_subexp, prefixify_subexp):  Change
	BINOP_MULTI_SUBSCRIPT to MULTI_SUBSCRIPT.
	* parse.c (parse_exp_1):  Call DUMP_EXPRESSION before and after
	prefixify'ing the expression.
	* printcmd.c (print_command_1):  Add comment.
	* ch-exp.y (expression_list):  Add useful actions.
	* ch-exp.y (value_array_element):  Add useful actions.
	* ch-exp.y (array_primitive_value):  Add production.
	* ch-exp.y (yylex):  Recognize ',' as a token.

Fri Jan  1 18:22:02 1993  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* Makefile.in: pass prefix and exec_prefix via FLAGS_TO_PASS,
	POSIXize the recursive makes (make [variable assignments] target{s})

Fri Jan  1 11:56:23 1993  Fred Fish  (fnf@cygnus.com)

	* tm-sun4sol2.h (CPLUS_MARKER):  Remove, now set in tm-sysv4.h.
	* tm-sysv4.h (CPLUS_MARKER):  By default, g++ uses '.' as the
	CPLUS_MARKER for all SVR4 systems, so follow suit.
	* defs.h (strdup_demangled):  Remove prototype.
	* dwarfread.c (enum_type, synthesize_typedef):  Use new macro
	SYMBOL_INIT_LANGUAGE_SPECIFIC.
	* dwarfread.c (new_symbol):  Use SYMBOL_INIT_DEMANGLED_NAME.
	* minsyms.c (install_minimal_symbols, prim_record_minimal_symbol,
	prim_record_minimal_symbol_and_info):  Use new macro
	SYMBOL_INIT_LANGUAGE_SPECIFIC.
	* minsyms.c (install_minimal_symbols):  Use new macro
	SYMBOL_INIT_DEMANGLED_NAME.
	* stabsread.c (define_symbol):  Use new macro
	SYMBOL_INIT_DEMANGLED_NAME.
	* symfile.c (add_psymbol_to_list, add_psymbol_addr_to_list):
	Use new macro SYMBOL_INIT_DEMANGLED_NAME.
	* symfile.h (ADD_PSYMBOL_VT_TO_LIST):  Use new macro
	SYMBOL_INIT_DEMANGLED_NAME.
	* symmisc.c (dump_msymbols, dump_symtab, print_partial_symbol):
	SYMBOL_DEMANGLED_NAME now tests language itself.
	* symtab.c (COMPLETION_LIST_ADD_SYMBOL):  SYMBOL_DEMANGLED_NAME
	now tests language itself.
	* symtab.h (SYMBOL_CPLUS_DEMANGLED_NAME):  New macro that does
	what SYMBOL_DEMANGLED_NAME used to do, directly access the C++
	mangled name member in the language dependent portion of a symbol.
	* symtab.h (SYMBOL_DEMANGLED_NAME):  New macro that returns the
	mangled name member appropriate for a symbol's language.
	* symtab.h (SYMBOL_SOURCE_NAME, SYMBOL_LINKAGE_NAME,
	SYMBOL_MATCHES_NAME, SYMBOL_MATCHES_REGEXP):
	SYMBOL_DEMANGLED_NAME now tests language itself.
	* symtab.h (SYMBOL_INIT_LANGUAGE_SPECIFIC):  New macro that
	initializes language dependent portion of symbol.
	* symtab.h (SYMBOL_INIT_DEMANGLED_NAME):  New macro that
	demangles and caches the demangled form of symbol names.
	* utils.c (fputs_demangled, fprint_symbol):  Use current language
	to select an appropriate demangling algorithm.
	* utils.c (strdup_demangled):  Remove, no longer used.
	* symtab.h (SYMBOL_CHILL_DEMANGLED_NAME):  New macro that directly
	access the Chill mangled name member in the language dependent
	portion of a symbol.
	* ch-lang.c (chill_demangle):  New function, simple demangler.
	* defs.h (chill_demangle):  Add prototype.
	* symtab.h (language_dependent_info):  Add struct for Chill.	

For older changes see ChangeLog-92

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
